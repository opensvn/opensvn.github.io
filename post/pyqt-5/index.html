<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>PyQt编程第5章 对话框 - 招财猫的博客</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="招财猫" /><meta name="description" content="对话框以“智力”分类为：哑巴，标准和聪明，取决于对话框知道程序数据的多少。 对话框以“模式”分类为：模式对话框和无模式对话框。 应用模式对话框一" /><meta name="keywords" content="Emacs, Cocos2d, Graphics" />






<meta name="generator" content="Hugo 0.70.0 with theme even" />


<link rel="canonical" href="https://gitop.cc/post/pyqt-5/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.78f8f17bab244b9ee62ad16480c9584d5fc2db06ae20681d1ca225cefd80767c.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="PyQt编程第5章 对话框" />
<meta property="og:description" content="对话框以“智力”分类为：哑巴，标准和聪明，取决于对话框知道程序数据的多少。 对话框以“模式”分类为：模式对话框和无模式对话框。 应用模式对话框一" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gitop.cc/post/pyqt-5/" />
<meta property="article:published_time" content="2015-10-14T16:20:56+00:00" />
<meta property="article:modified_time" content="2015-10-14T16:20:56+00:00" />
<meta itemprop="name" content="PyQt编程第5章 对话框">
<meta itemprop="description" content="对话框以“智力”分类为：哑巴，标准和聪明，取决于对话框知道程序数据的多少。 对话框以“模式”分类为：模式对话框和无模式对话框。 应用模式对话框一">
<meta itemprop="datePublished" content="2015-10-14T16:20:56&#43;00:00" />
<meta itemprop="dateModified" content="2015-10-14T16:20:56&#43;00:00" />
<meta itemprop="wordCount" content="2425">



<meta itemprop="keywords" content="Python," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="PyQt编程第5章 对话框"/>
<meta name="twitter:description" content="对话框以“智力”分类为：哑巴，标准和聪明，取决于对话框知道程序数据的多少。 对话框以“模式”分类为：模式对话框和无模式对话框。 应用模式对话框一"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">招财猫的博客</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">招财猫的博客</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">PyQt编程第5章 对话框</h1>

      <div class="post-meta">
        <span class="post-time"> 2015-10-14 </span>
        <div class="post-category">
            <a href="/categories/gui/"> GUI </a>
            </div>
          <span class="more-meta"> 约 2425 字 </span>
          <span class="more-meta"> 预计阅读 5 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#模式okcancel风格对话框">模式OK/Cancel风格对话框</a></li>
  </ul>

  <ul>
    <li><a href="#无模式applyclose风格对话框">无模式Apply/Close风格对话框</a></li>
    <li><a href="#无模式live对话框">无模式“Live”对话框</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>对话框以“智力”分类为：哑巴，标准和聪明，取决于对话框知道程序数据的多少。
对话框以“模式”分类为：模式对话框和无模式对话框。</p>
<p>应用模式对话框一旦被调用，用户只能与其交互，不能使用程序其它部分。
窗口模式对话框和应用模式对话框类似，只是它仅仅阻止与其父窗口交互。
无模式对话框允许用户与程序其它部分交互。</p>
<p>编写对话框另一个重要方面是如何处理有效性检验。我们尽量挑选合适的部件并设置其属性来避免编写有效性
检验代码。
我们称应用到单个部件的检验为部件级确认。当部件之间有相互关系时，称为表级确认。</p>
<h1 id="哑巴对话框">“哑巴”对话框</h1>
<p>哑巴对话框不知道其部件使用的数据。哑巴对话框通常是带有<code>accept</code>和<code>reject</code>按钮的模式对话框。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">setPenProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">dialog</span> <span class="o">=</span> <span class="n">PenPropertiesDlg</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">dialog</span><span class="o">.</span><span class="n">widthSpinBox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
    <span class="n">dialog</span><span class="o">.</span><span class="n">beveledCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beveled</span><span class="p">)</span>
    <span class="n">dialog</span><span class="o">.</span><span class="n">styleComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">styleComboBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">widthSpinBox</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beveled</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">beveledCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">dialog</span><span class="o">.</span><span class="n">styleComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateData</span><span class="p">()</span></code></pre></td></tr></table>
</div>
</div>
<p>当我们调用一个对话框的<code>exec_</code>时，则以模式对话框显示。当用户点击<code>accept</code>，<code>exec_</code>返回<code>True</code>，
否则返回<code>False</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">PenPropertiesDlg</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PenPropertiesDlg</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">widthLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&#34;&amp;Width:&#34;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widthSpinBox</span> <span class="o">=</span> <span class="n">QSpinBox</span><span class="p">()</span>
        <span class="n">widthLabel</span><span class="o">.</span><span class="n">setBuddy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widthSpinBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widthSpinBox</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="o">|</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widthSpinBox</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beveledCheckBox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&#34;&amp;Beveled edges&#34;</span><span class="p">)</span>
        <span class="n">styleLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&#34;&amp;Style:&#34;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">styleComboBox</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="n">styleLabel</span><span class="o">.</span><span class="n">setBuddy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">styleComboBox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">styleComboBox</span><span class="o">.</span><span class="n">addItems</span><span class="p">([</span><span class="s2">&#34;Solid&#34;</span><span class="p">,</span> <span class="s2">&#34;Dashed&#34;</span><span class="p">,</span> <span class="s2">&#34;Dotted&#34;</span><span class="p">,</span>
                                     <span class="s2">&#34;DashDotted&#34;</span><span class="p">,</span> <span class="s2">&#34;DashDotDotted&#34;</span><span class="p">])</span>
        <span class="n">okButton</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&#34;&amp;OK&#34;</span><span class="p">)</span>
        <span class="n">cancelButton</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&#34;Cancel&#34;</span><span class="p">)</span>

        <span class="n">buttonLayout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">buttonLayout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">()</span>
        <span class="n">buttonLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">okButton</span><span class="p">)</span>
        <span class="n">buttonLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">cancelButton</span><span class="p">)</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QGridLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widthLabel</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widthSpinBox</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beveledCheckBox</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">styleLabel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">styleComboBox</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">buttonLayout</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">okButton</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;clicked()&#34;</span><span class="p">),</span>
                     <span class="bp">self</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="s2">&#34;accept()&#34;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">cancelButton</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;clicked()&#34;</span><span class="p">),</span>
                     <span class="bp">self</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="s2">&#34;reject()&#34;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&#34;Pen Properties&#34;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<p>在标签文字中的引号(<code>&amp;</code>)有2个可能的含义，一个简单地为字符引号。另一个指示引号后面的字母为键盘
加速键，可以使用Alt+字母快速定位。字符引号和加速键的区别是标签有没有一个“伙伴”。</p>
<p><strong>对话框按钮布局</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">buttonBox</span> <span class="o">=</span> <span class="n">QDialogButtonBox</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span>
                             <span class="o">|</span> <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span>
<span class="n">buttonBox</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">buttonBox</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">buttonBox</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;accepted()&#34;</span><span class="p">),</span>
             <span class="bp">self</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="s2">&#34;accept()&#34;</span><span class="p">))</span>
<span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">buttonBox</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;rejected()&#34;</span><span class="p">),</span>
             <span class="bp">self</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="s2">&#34;reject()&#34;</span><span class="p">))</span></code></pre></td></tr></table>
</div>
</div>
<p><code>QDialogButtonBox</code>自动处理不同平台的默认外观。
<code>QDialogButtonBox</code>默认是水平布局，可以传递<code>Qt.Vertical</code>给它构造器设置垂直布局，或者调用
<code>setOrientation</code>函数。</p>
<p><code>QGridLayout.addWidget</code>方法的参数是部件，所在行，所在列，和可选的行扩展数，列扩展数。</p>
<table>
<thead>
<tr>
<th>语法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>b.addLayout(l)</td>
<td align="left">添加QLayout l到QBoxLayout b中, b通常是QHBoxLayout或QVBoxLayout</td>
</tr>
<tr>
<td>b.addSpacing(i)</td>
<td align="left">添加一个指定数量为i的QSpacerItem到QBoxLayout b中</td>
</tr>
<tr>
<td>b.addStretch(i)</td>
<td align="left">添加一个最小为0且伸展系数为i的QSpacerItem到QBoxLayout b中</td>
</tr>
<tr>
<td>b.addWidget(w)</td>
<td align="left">添加QWidget w到QBoxLayout b中</td>
</tr>
<tr>
<td>b.setStretchFactor(x, i)</td>
<td align="left">设置QBoxLayout b的伸展系数或QWidget x为i</td>
</tr>
<tr>
<td>g.addLayout(l, r, c)</td>
<td align="left">在行r列c添加QLayout l到QGridLayout g; 可以提供附加的行扩展和列扩展参数</td>
</tr>
<tr>
<td>g.addWidget(w, r, c)</td>
<td align="left">在行r列c添加QWidget w到QGridLayout g; 可以提供附加的行扩展和列扩展参数</td>
</tr>
<tr>
<td>g.setRowStretch(r, i)</td>
<td align="left">设置QGridLayout g行r的伸展为i</td>
</tr>
<tr>
<td>g.setColumnStretch(c, i)</td>
<td align="left">设置QGridLayout g列c的伸展为i</td>
</tr>
</tbody>
</table>
<h1 id="标准对话框">标准对话框</h1>
<p>我们认为一个对话框是标准对话框，如果它访问部件都是通过类方法，而不是部件本身。</p>
<h2 id="模式okcancel风格对话框">模式OK/Cancel风格对话框</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">setNumberFormat1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">dialog</span> <span class="o">=</span> <span class="n">numberformatdlg1</span><span class="o">.</span><span class="n">NumberFormatDlg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">numberFormat</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refreshTable</span><span class="p">()</span></code></pre></td></tr></table>
</div>
</div>
<table>
<thead>
<tr>
<th>语法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>d.addButton(b, r)</td>
<td align="left">添加具有QDialogButtonBox.ButtonRole r的QPushButton b到QDialogButtonBox d中</td>
</tr>
<tr>
<td>d.addButton(t, r)</td>
<td align="left">添加具有QDialogButtonBox.ButtonRole r且名字为t的QPushButton到QDialogButtonBox d中，返回所添加的按钮</td>
</tr>
<tr>
<td>d.addButton(s)</td>
<td align="left">添加由QDialogButtonBox.StandardButton s指定的按钮QDialogButtonBox d中，返回所添加的按钮</td>
</tr>
<tr>
<td>d.setOrientation(o)</td>
<td align="left">设置QDialogButtonBox d的方向为Qt.Orientation o(垂直或水平)</td>
</tr>
<tr>
<td>d.button(s)</td>
<td align="left">返回QDialogButtonBox d中由StandardButton s指定的按钮，或None</td>
</tr>
<tr>
<td>d.accepted()</td>
<td align="left">当角色为QDialogButtonBox.Accept的按钮被点击，发射该信号</td>
</tr>
<tr>
<td>d.rejected()</td>
<td align="left">当角色为QDialogButtonBox.Reject的按钮被点击，发射该信号</td>
</tr>
</tbody>
</table>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">accept</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">ThousandsError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span> <span class="k">pass</span>
    <span class="k">class</span> <span class="nc">DecimalError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span> <span class="k">pass</span>
    <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&#34;Decimal Marker Error&#34;</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="n">QDialog</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<p>为什么这里不使用<code>super</code>来调用基类的<code>accept</code>而是显式使用<code>QDialog</code>？因为在这个环境下使用<code>super</code>
不起作用。PyQt为了尽可能效率高，使用懒惰属性查找，结果就是此处的<code>super</code>在PyQt的子类中不会像预期
那样工作。(见pyqt4ref.html文档，&ldquo;super and PyQt classes&rdquo;)</p>
<h1 id="智能对话框">智能对话框</h1>
<p>智能对话框通常是无模式的，带有<code>apply</code>和<code>close</code>按钮。</p>
<table>
<thead>
<tr>
<th>语法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>d.accept()</td>
<td align="left">关闭(隐藏)QDialog d，停止事件循环，并导致exec_()返回True。如果设置了Qt.WA_DeleteOnClose，则对话框被删除</td>
</tr>
<tr>
<td>d.reject()</td>
<td align="left">关闭(隐藏)QDialog d，停止事件循环，并导致exec_()返回False。</td>
</tr>
<tr>
<td>d.done(i)</td>
<td align="left">关闭(隐藏)QDialog d，停止事件循环，并导致exec_()返回i。</td>
</tr>
<tr>
<td>d.exec_()</td>
<td align="left">模式显示QDialog d，阻塞直到对话框关闭</td>
</tr>
<tr>
<td>d.show()</td>
<td align="left">无模式显示QDialog d；继承自QWidget</td>
</tr>
<tr>
<td>d.setSizeGripEnabled(b)</td>
<td align="left">显示或隐藏QDialog d的size grip，基于bool b</td>
</tr>
</tbody>
</table>
<h2 id="无模式applyclose风格对话框">无模式Apply/Close风格对话框</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">setNumberFormat2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">dialog</span> <span class="o">=</span> <span class="n">numberformatdlg2</span><span class="o">.</span><span class="n">NumberFormatDlg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dialog</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;changed&#34;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">refreshTable</span><span class="p">)</span>
    <span class="n">dialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></td></tr></table>
</div>
</div>
<p>尽管dialog超出范围，PyQt足够聪明地保存了一个无模式对话框的引用，因此dialog继续存在。可以设置
dialog的属性为Qt.WA_DeleteOnClose，则每次都删除对话框而不是隐藏。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">NumberFormatDlg</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">WA_DeleteOnClose</span><span class="p">)</span>
    <span class="n">punctuationRe</span> <span class="o">=</span> <span class="n">QRegExp</span><span class="p">(</span><span class="sa">r</span><span class="s2">&#34;[ ,;:.]&#34;</span><span class="p">)</span>
    <span class="n">thousandsLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&#34;&amp;Thousands separator&#34;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">thousandsEdit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">format</span><span class="p">[</span><span class="s2">&#34;thousandsseparator&#34;</span><span class="p">])</span>
    <span class="n">thousandsLabel</span><span class="o">.</span><span class="n">setBuddy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thousandsEdit</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">thousandsEdit</span><span class="o">.</span><span class="n">setMaxLength</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">thousandsEdit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span>
            <span class="n">QRegExpValidator</span><span class="p">(</span><span class="n">punctuationRe</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
    <span class="n">decimalMarkerLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&#34;Decimal &amp;marker&#34;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decimalMarkerEdit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="n">format</span><span class="p">[</span><span class="s2">&#34;decimalmarker&#34;</span><span class="p">])</span>
    <span class="n">decimalMarkerLabel</span><span class="o">.</span><span class="n">setBuddy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">decimalMarkerEdit</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decimalMarkerEdit</span><span class="o">.</span><span class="n">setMaxLength</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decimalMarkerEdit</span><span class="o">.</span><span class="n">setValidator</span><span class="p">(</span>
            <span class="n">QRegExpValidator</span><span class="p">(</span><span class="n">punctuationRe</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decimalMarkerEdit</span><span class="o">.</span><span class="n">setInputMask</span><span class="p">(</span><span class="s2">&#34;X&#34;</span><span class="p">)</span>
    <span class="n">decimalPlacesLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&#34;&amp;Decimal places&#34;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decimalPlacesSpinBox</span> <span class="o">=</span> <span class="n">QSpinBox</span><span class="p">()</span>
    <span class="n">decimalPlacesLabel</span><span class="o">.</span><span class="n">setBuddy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">decimalPlacesSpinBox</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decimalPlacesSpinBox</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">decimalPlacesSpinBox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">format</span><span class="p">[</span><span class="s2">&#34;decimalplaces&#34;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">redNegativesCheckBox</span> <span class="o">=</span> <span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&#34;&amp;Red negative numbers&#34;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">redNegativesCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">format</span><span class="p">[</span><span class="s2">&#34;rednegatives&#34;</span><span class="p">])</span>
    <span class="n">buttonBox</span> <span class="o">=</span> <span class="n">QDialogButtonBox</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Apply</span><span class="o">|</span>
                                 <span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">buttonBox</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Apply</span><span class="p">),</span>
                 <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;clicked()&#34;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">buttonBox</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;rejected()&#34;</span><span class="p">),</span>
                 <span class="bp">self</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="s2">&#34;reject()&#34;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&#34;Set Number Format (Modeless)&#34;</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>
<p><code>QRegExpValidator</code>初始化式需要一个正则表达式和一个<code>parent</code>。
一个掩饰“X”说明需要任意一个字符，格式掩饰在<code>QLineEdit.inputMask</code>文档中说明。</p>
<h2 id="无模式live对话框">无模式“Live”对话框</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">setNumberFormat3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">numberFormatDlg</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numberFormatDlg</span> <span class="o">=</span> <span class="n">numberformatdlg3</span><span class="o">.</span><span class="n">NumberFormatDlg</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">refreshTable</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">numberFormatDlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">numberFormatDlg</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">numberFormatDlg</span><span class="o">.</span><span class="n">activateWindow</span><span class="p">()</span></code></pre></td></tr></table>
</div>
</div>
<p><code>raise_</code>将对话框置于其它窗口之上
<code>activateWindow</code>聚焦于对话框</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thousandsEdit</span><span class="p">,</span>
             <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;textEdited(QString)&#34;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkAndFix</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">decimalMarkerEdit</span><span class="p">,</span>
             <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;textEdited(QString)&#34;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkAndFix</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">decimalPlacesSpinBox</span><span class="p">,</span>
             <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;valueChanged(int)&#34;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">redNegativesCheckBox</span><span class="p">,</span>
             <span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&#34;toggled(bool)&#34;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">)</span></code></pre></td></tr></table>
</div>
</div>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">招财猫</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2015-10-14
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/img/weixin-donate.jpeg">
        <span>微信打赏</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/img/zhifubao-donate.jpeg">
        <span>支付宝打赏</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/python/">Python</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/pyqt-6/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">PyQt编程第6章 主窗口</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/pyqt-4/">
            <span class="next-text nav-default">PyQt编程第4章 GUI编程介绍</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  <span id="/post/pyqt-5/" class="leancloud_visitors" data-flag-title="PyQt编程第5章 对话框">
		<span class="post-meta-item-text">文章阅读量 </span>
		<span class="leancloud-visitors-count">0</span>
		<p></p>
	  </span>
  <div id="vcomments"></div>
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
  <script type="text/javascript">
    new Valine({
        el: '#vcomments' ,
        appId: 'nTlkWW6BFHR3ekmRDf9ragQd-gzGzoHsz',
        appKey: 'aGlzQgiAeX7JBeHOTXK9SgpC',
        notify:  false ,
        verify:  false ,
        avatar:'mm',
        placeholder: '说点什么吧...',
        visitor:  true 
    });
  </script>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://github.com/opensvn" class="iconfont icon-github" title="github"></a>
      <a href="https://www.weibo.com/opensvn" class="iconfont icon-weibo" title="weibo"></a>
  <a href="https://gitop.cc/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2019 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">招财猫</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>








</body>
</html>
