<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>数组 | 招财猫的博客</title>
    <meta property="og:title" content="数组 - 招财猫的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2018-11-12T19:37:34&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2018-11-12T19:37:34&#43;08:00'>
        
    <meta name="Keywords" content="C,C&#43;&#43;,Python,Golang">
    <meta name="description" content="数组">
        
    <meta name="author" content="招财猫">
    <meta property="og:url" content="http://gitop.cc/posts/arrays/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-4031353640611810",
        enable_page_level_ads: true
    });
    </script>
    


    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="http://gitop.cc">
                        招财猫的博客
                    </a>
                
                <p class="description">专注于C&#43;&#43;、Python、Golang</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="http://gitop.cc">首页</a>
                    
                    <a  href="http://gitop.cc/archives/" title="归档">归档</a>
                    
                    <a  href="http://gitop.cc/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#创建数组">创建数组</a></li>
        <li><a href="#读写数组元素">读写数组元素</a></li>
        <li><a href="#稀疏数组">稀疏数组</a></li>
        <li><a href="#数组长度">数组长度</a></li>
        <li><a href="#添加和删除元素">添加和删除元素</a></li>
        <li><a href="#遍历数组">遍历数组</a></li>
        <li><a href="#多维数组">多维数组</a></li>
        <li><a href="#数组方法">数组方法</a></li>
        <li><a href="#es5数组方法">ES5数组方法</a></li>
        <li><a href="#类数组对象">类数组对象</a></li>
        <li><a href="#字符串作为类数组">字符串作为类数组</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">数组</h1>
        </header>
        <date class="post-meta meta-date">
            2018年11月12日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='http://gitop.cc/categories/Language'>Language</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <h3 id="创建数组">创建数组</h3>
<p>创建数组的最简单方法是使用数组字面值：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> empty <span style="color:#000;font-weight:bold">=</span> []; <span style="color:#998;font-style:italic">// An array with no elements
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> primes <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">2</span>, <span style="color:#099">3</span>, <span style="color:#099">5</span>, <span style="color:#099">7</span>, <span style="color:#099">11</span>]; <span style="color:#998;font-style:italic">// An array with 5 numeric elements
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> misc <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1.1</span>, <span style="color:#000;font-weight:bold">true</span>, <span style="color:#d14">&#34;a&#34;</span>,]; <span style="color:#998;font-style:italic">// 3 elements of various types + trailing comma
</span></code></pre></div>
<p>数组字面值中的元素可以是任意的表达式。如果数组中有省略的元素，其值为<code>undefined</code>：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> count <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,,<span style="color:#099">3</span>]; <span style="color:#998;font-style:italic">// An array with 3 elements, the middle one undefined.
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> undefs <span style="color:#000;font-weight:bold">=</span> [,,]; <span style="color:#998;font-style:italic">// An array with 2 elements, both undefined.
</span></code></pre></div>
<p>另一种方式是使用<code>Array</code>构造函数：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Array</span>(); <span style="color:#998;font-style:italic">// equivalent to []
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Array</span>(<span style="color:#099">10</span>); <span style="color:#998;font-style:italic">// length 10, but has no values
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Array</span>(<span style="color:#099">5</span>, <span style="color:#099">4</span>, <span style="color:#099">3</span>, <span style="color:#099">2</span>, <span style="color:#099">1</span>, <span style="color:#d14">&#34;testing, testing&#34;</span>); <span style="color:#998;font-style:italic">// arguments become array&#39;s elements
</span></code></pre></div>
<h3 id="读写数组元素">读写数组元素</h3>
<p>使用<code>[]</code>运算符访问数组的元素。所有索引都是属性名，但只有0到2^32-1之间的整数属性名才是索引。所有数组都是对象，你可以在数组上创建任何名称的属性。如果你使用的是索引，那么数组会自动更新<code>length</code>属性。</p>
<p>负数或浮点数可以用于数组索引。它们被转换为一个字符串，并被用作属性名，它被视为常规对象属性，而不是数组索引。</p>
<p>数组索引只是一种特殊类型的属性名，这意味着数组没有“越界”的概念：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#000;font-weight:bold">true</span>, <span style="color:#000;font-weight:bold">false</span>]; <span style="color:#998;font-style:italic">// This array has elements at indexes 0 and 1
</span><span style="color:#998;font-style:italic"></span>a[<span style="color:#099">2</span>] <span style="color:#998;font-style:italic">// =&gt; undefined. No element at this index.
</span><span style="color:#998;font-style:italic"></span>a[<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>] <span style="color:#998;font-style:italic">// =&gt; undefined. No property with this name.
</span></code></pre></div>
<h3 id="稀疏数组">稀疏数组</h3>
<p>稀疏数组是没有连续索引的数组。稀疏数组的<code>length</code>属性的值大于元素的数量：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Array</span>(<span style="color:#099">5</span>); <span style="color:#998;font-style:italic">// No elements, but a.length is 5.
</span><span style="color:#998;font-style:italic"></span>a <span style="color:#000;font-weight:bold">=</span> []; <span style="color:#998;font-style:italic">// Create an array with no elements and length = 0.
</span><span style="color:#998;font-style:italic"></span>a[<span style="color:#099">1000</span>] <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; <span style="color:#998;font-style:italic">// Assignment adds one element but sets length to 1001.
</span></code></pre></div>
<p>创建数组时忽略的元素和稀疏数组中不存在的元素是有区别的：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a1 <span style="color:#000;font-weight:bold">=</span> [,,,]; <span style="color:#998;font-style:italic">// This array is [undefined, undefined, undefined]
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> a2 <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Array</span>(<span style="color:#099">3</span>); <span style="color:#998;font-style:italic">// This array has no values at all
</span><span style="color:#998;font-style:italic"></span><span style="color:#099">0</span> <span style="color:#000;font-weight:bold">in</span> a1 <span style="color:#998;font-style:italic">// =&gt; true: a1 has an element with index 0
</span><span style="color:#998;font-style:italic"></span><span style="color:#099">0</span> <span style="color:#000;font-weight:bold">in</span> a2 <span style="color:#998;font-style:italic">// =&gt; false: a2 has no element with index 0
</span></code></pre></div>
<h3 id="数组长度">数组长度</h3>
<p>数组的<code>length</code>属性使得数组不同于普通的JavaScript对象。对于密集的数组， <code>length</code>属性指定数组中元素的数量。</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">[].length <span style="color:#998;font-style:italic">// =&gt; 0: the array has no elements
</span><span style="color:#998;font-style:italic"></span>[<span style="color:#d14">&#39;a&#39;</span>,<span style="color:#d14">&#39;b&#39;</span>,<span style="color:#d14">&#39;c&#39;</span>].length <span style="color:#998;font-style:italic">// =&gt; 3: highest index is 2, length is 3
</span></code></pre></div>
<p>稀疏数组的<code>length</code> 属性大于元素的数量。也就是说，数组的索引永远小于数组<code>length</code>属性。为了维持这个不变量，数组有2个特殊行为：</p>
<ol>
<li>如果给大于<code>length</code>的索引<code>i</code>的元素赋值，则<code>length</code>被设为<code>i+1</code>。</li>
<li>如果将<code>length</code>属性设置为小于其当前值的非负整数<code>n</code>，那么任何索引大于或等于<code>n</code>的元素都被删除。</li>
</ol>
<p>将<code>length</code>属性设置为大于其当前的值，这样做实际上只是在数组末尾创建一个稀疏区域。在ES5中，可以使用<code>Object.defineProperty</code>将数组的<code>length</code>属性设置为只读：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>]; <span style="color:#998;font-style:italic">// Start with a 3-element array.
</span><span style="color:#998;font-style:italic"></span><span style="color:#0086b3">Object</span>.defineProperty(a, <span style="color:#d14">&#34;length&#34;</span>, {writable<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">false</span>});  <span style="color:#998;font-style:italic">// Make the length property readonly.
</span><span style="color:#998;font-style:italic"></span>a.length <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; <span style="color:#998;font-style:italic">// a is unchanged.
</span></code></pre></div>
<p>类似地，如果使数组元素不可配置，则不能删除它，即不能将<code>length</code>属性设置为小于不可配置元素的索引。</p>
<h3 id="添加和删除元素">添加和删除元素</h3>
<p>最简单的添加元素方法是赋值给新索引：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> [] <span style="color:#998;font-style:italic">// Start with an empty array.
</span><span style="color:#998;font-style:italic"></span>a[<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;zero&#34;</span>; <span style="color:#998;font-style:italic">// And add elements to it.
</span><span style="color:#998;font-style:italic"></span>a[<span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;one&#34;</span>;
</code></pre></div>
<p>还可以使用<code>push</code>方法向数组末尾添加一个或多个值：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> []; <span style="color:#998;font-style:italic">// Start with an empty array
</span><span style="color:#998;font-style:italic"></span>a.push(<span style="color:#d14">&#34;zero&#34;</span>) <span style="color:#998;font-style:italic">// Add a value at the end. a = [&#34;zero&#34;]
</span><span style="color:#998;font-style:italic"></span>a.push(<span style="color:#d14">&#34;one&#34;</span>, <span style="color:#d14">&#34;two&#34;</span>) <span style="color:#998;font-style:italic">// Add two more values. a = [&#34;zero&#34;, &#34;one&#34;, &#34;two&#34;]
</span></code></pre></div>
<p>可以使用<code>unshift</code>在数组开头插入元素，将现有的元素移到更高的索引。</p>
<p>使用<code>delete</code>删除数组元素：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>];
<span style="color:#000;font-weight:bold">delete</span> a[<span style="color:#099">1</span>]; <span style="color:#998;font-style:italic">// a now has no element at index 1
</span><span style="color:#998;font-style:italic"></span><span style="color:#099">1</span> <span style="color:#000;font-weight:bold">in</span> a <span style="color:#998;font-style:italic">// =&gt; false: no array index 1 is defined
</span><span style="color:#998;font-style:italic"></span>a.length <span style="color:#998;font-style:italic">// =&gt; 3: delete does not affect array length
</span></code></pre></div>
<p><code>delete</code>数组元素不会改变<code>length</code>属性，也不会将索引较高的元素向下移动，成为稀疏数组。也通过将<code>length</code>属性设置为新的长度来删除数组末尾的元素。</p>
<p><code>pop</code>方法将数组的<code>length</code>减1，并返回删除元素的值。</p>
<p><code>shift</code>方法从数组的开头删除一个元素，并将所有的元素索引前移一个位置。</p>
<p><code>splice</code>是用于插入、删除或替换数组元素的通用方法。它改变<code>length</code>属性，并根据需要将数组元素移到更高或更低的索引。</p>
<h3 id="遍历数组">遍历数组</h3>
<p>遍历数组元素最常见的方法是使用for循环：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> keys <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">Object</span>.keys(o); <span style="color:#998;font-style:italic">// Get an array of property names for object o
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> values <span style="color:#000;font-weight:bold">=</span> [] <span style="color:#998;font-style:italic">// Store matching property values in this array
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">var</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; i <span style="color:#000;font-weight:bold">&lt;</span> keys.length; i<span style="color:#000;font-weight:bold">++</span>) { <span style="color:#998;font-style:italic">// For each index in the array
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">var</span> key <span style="color:#000;font-weight:bold">=</span> keys[i]; <span style="color:#998;font-style:italic">// Get the key at that index
</span><span style="color:#998;font-style:italic"></span>    values[i] <span style="color:#000;font-weight:bold">=</span> o[key]; <span style="color:#998;font-style:italic">// Store the value in the values array
</span><span style="color:#998;font-style:italic"></span>}
</code></pre></div>
<p>for循环一个小小的优化，不用每次查询<code>length</code>：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">var</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>, len <span style="color:#000;font-weight:bold">=</span> keys.length; i <span style="color:#000;font-weight:bold">&lt;</span> len; i<span style="color:#000;font-weight:bold">++</span>) {
    <span style="color:#998;font-style:italic">// loop body remains the same
</span><span style="color:#998;font-style:italic"></span>}
</code></pre></div>
<p>循环中检查数组元素的几种情况：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">var</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; i <span style="color:#000;font-weight:bold">&lt;</span> a.length; i<span style="color:#000;font-weight:bold">++</span>) {
    <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">!</span>a[i]) <span style="color:#000;font-weight:bold">continue</span>; <span style="color:#998;font-style:italic">// Skip null, undefined, and nonexistent elements
</span><span style="color:#998;font-style:italic"></span>}
<span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">var</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; i <span style="color:#000;font-weight:bold">&lt;</span> a.length; i<span style="color:#000;font-weight:bold">++</span>) {
    <span style="color:#000;font-weight:bold">if</span> (a[i] <span style="color:#000;font-weight:bold">===</span> <span style="color:#000;font-weight:bold">undefined</span>) <span style="color:#000;font-weight:bold">continue</span>; <span style="color:#998;font-style:italic">// Skip undefined + nonexistent elements
</span><span style="color:#998;font-style:italic"></span>}
<span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">var</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; i <span style="color:#000;font-weight:bold">&lt;</span> a.length; i<span style="color:#000;font-weight:bold">++</span>) {
    <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">!</span>(i <span style="color:#000;font-weight:bold">in</span> a)) <span style="color:#000;font-weight:bold">continue</span> ; <span style="color:#998;font-style:italic">// Skip nonexistent elements
</span><span style="color:#998;font-style:italic"></span>}
</code></pre></div>
<p>for/in循环可以用于稀疏阵列。每次循环给循环变量分配一个可枚举的属性名（包括数组索引），不存在的索引将不会被遍历：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">var</span> index <span style="color:#000;font-weight:bold">in</span> sparseArray) {
    <span style="color:#000;font-weight:bold">var</span> value <span style="color:#000;font-weight:bold">=</span> sparseArray[index];
    <span style="color:#998;font-style:italic">// Now do something with index and value
</span><span style="color:#998;font-style:italic"></span>}
</code></pre></div>
<p>for/in循环可以返回继承属性的名字，比如添加到<code>Array.prototype</code>的属性。因此在数组上使用for/in循环，应该过滤掉不需要的属性：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">var</span> i <span style="color:#000;font-weight:bold">in</span> a) {
    <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">!</span>a.hasOwnProperty(i)) <span style="color:#000;font-weight:bold">continue</span>; <span style="color:#998;font-style:italic">// Skip inherited properties
</span><span style="color:#998;font-style:italic"></span>}
<span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">var</span> i <span style="color:#000;font-weight:bold">in</span> a) {
    <span style="color:#998;font-style:italic">// Skip i if it is not a non-negative integer
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">if</span> (<span style="color:#0086b3">String</span>(<span style="color:#0086b3">Math</span>.floor(<span style="color:#0086b3">Math</span>.abs(<span style="color:#0086b3">Number</span>(i)))) <span style="color:#000;font-weight:bold">!==</span> i) <span style="color:#000;font-weight:bold">continue</span>;
}
</code></pre></div>
<p>ES5定义了许多用于迭代数组元素的新方法，<code>forEach</code>方法是最通用的一个：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> data <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>,<span style="color:#099">4</span>,<span style="color:#099">5</span>]; <span style="color:#998;font-style:italic">// This is the array we want to iterate
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> sumOfSquares <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; <span style="color:#998;font-style:italic">// We want to compute the sum of the squares of data
</span><span style="color:#998;font-style:italic"></span>data.forEach(<span style="color:#000;font-weight:bold">function</span>(x) { <span style="color:#998;font-style:italic">// Pass each element of data to this function
</span><span style="color:#998;font-style:italic"></span>    sumOfSquares <span style="color:#000;font-weight:bold">+=</span> x<span style="color:#000;font-weight:bold">*</span>x; <span style="color:#998;font-style:italic">// add up the squares
</span><span style="color:#998;font-style:italic"></span>});
sumOfSquares <span style="color:#998;font-style:italic">// =&gt;55 : 1+4+9+16+25
</span></code></pre></div>
<h3 id="多维数组">多维数组</h3>
<p>JavaScript不支持真正的多维数组，但可以用数组的数组模拟它们：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#998;font-style:italic">// Create a multidimensional array
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> table <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Array</span>(<span style="color:#099">10</span>); <span style="color:#998;font-style:italic">// 10 rows of the table
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">var</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; i <span style="color:#000;font-weight:bold">&lt;</span> table.length; i<span style="color:#000;font-weight:bold">++</span>)
    table[i] <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Array</span>(<span style="color:#099">10</span>); <span style="color:#998;font-style:italic">// Each row has 10 columns
</span><span style="color:#998;font-style:italic">// Initialize the array
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">for</span>(<span style="color:#000;font-weight:bold">var</span> row <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; row <span style="color:#000;font-weight:bold">&lt;</span> table.length; row<span style="color:#000;font-weight:bold">++</span>) {
    <span style="color:#000;font-weight:bold">for</span>(col <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; col <span style="color:#000;font-weight:bold">&lt;</span> table[row].length; col<span style="color:#000;font-weight:bold">++</span>) {
        table[row][col] <span style="color:#000;font-weight:bold">=</span> row<span style="color:#000;font-weight:bold">*</span>col;
    }
}
<span style="color:#000;font-weight:bold">var</span> product <span style="color:#000;font-weight:bold">=</span> table[<span style="color:#099">5</span>][<span style="color:#099">7</span>]; <span style="color:#998;font-style:italic">// 35
</span></code></pre></div>
<h3 id="数组方法">数组方法</h3>
<p>ES3在<code>Array.prototype</code>上定义了许多有用函数。这意味着它们可以用作任何数组的方法。</p>
<h4 id="join">join</h4>
<p><code>join</code>方法将数组元素转换为字符串，并连接起来，返回字符串。可以指定一个可选的字符串来分隔元素，默认使用逗号：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>, <span style="color:#099">2</span>, <span style="color:#099">3</span>]; <span style="color:#998;font-style:italic">// Create a new array with these three elements
</span><span style="color:#998;font-style:italic"></span>a.join(); <span style="color:#998;font-style:italic">// =&gt; &#34;1,2,3&#34;
</span><span style="color:#998;font-style:italic"></span>a.join(<span style="color:#d14">&#34; &#34;</span>); <span style="color:#998;font-style:italic">// =&gt; &#34;1 2 3&#34;
</span><span style="color:#998;font-style:italic"></span>a.join(<span style="color:#d14">&#34;&#34;</span>); <span style="color:#998;font-style:italic">// =&gt; &#34;123&#34;
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> b <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Array</span>(<span style="color:#099">10</span>); <span style="color:#998;font-style:italic">// An array of length 10 with no elements
</span><span style="color:#998;font-style:italic"></span>b.join(<span style="color:#d14">&#39;-&#39;</span>) <span style="color:#998;font-style:italic">// =&gt; &#39;---------&#39;: a string of 9 hyphens
</span></code></pre></div>
<p><code>join</code>方法和<code>split</code>方法刚好相反。</p>
<h4 id="reverse">reverse</h4>
<p><code>reverse</code>方法原地反转数组的顺序，并返回已反转的数组。</p>
<h4 id="sort">sort</h4>
<p><code>sort</code>原地排序数组元素，并返回已排序的数组。在不带参数的情况下，<code>sort</code>按字母顺序对数组元素进行排序，如果需要的话，将数组元素临时转换为字符串来进行比较。如果数组包含<code>undefined</code>元素，它们被移到数组后面。</p>
<p>要将数组按其它顺序排序，必须传递一个比较函数作为<code>sort</code>的参数。这个函数决定它的两个参数中的哪个应该先出现在数组中：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">33</span>, <span style="color:#099">4</span>, <span style="color:#099">1111</span>, <span style="color:#099">222</span>];
a.sort(); <span style="color:#998;font-style:italic">// Alphabetical order: 1111, 222, 33, 4
</span><span style="color:#998;font-style:italic"></span>a.sort(<span style="color:#000;font-weight:bold">function</span>(a,b) { <span style="color:#998;font-style:italic">// Numerical order: 4, 33, 222, 1111
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">return</span> a<span style="color:#000;font-weight:bold">-</span>b;
});
a.sort(<span style="color:#000;font-weight:bold">function</span>(a,b) {<span style="color:#000;font-weight:bold">return</span> b<span style="color:#000;font-weight:bold">-</span>a}); <span style="color:#998;font-style:italic">// Reverse numerical order
</span><span style="color:#998;font-style:italic"></span>
a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#d14">&#39;ant&#39;</span>, <span style="color:#d14">&#39;Bug&#39;</span>, <span style="color:#d14">&#39;cat&#39;</span>, <span style="color:#d14">&#39;Dog&#39;</span>]
a.sort(); <span style="color:#998;font-style:italic">// case-sensitive sort: [&#39;Bug&#39;,&#39;Dog&#39;,&#39;ant&#39;,cat&#39;]
</span><span style="color:#998;font-style:italic"></span>a.sort(<span style="color:#000;font-weight:bold">function</span>(s,t) { <span style="color:#998;font-style:italic">// Case-insensitive sort
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> s.toLowerCase();
    <span style="color:#000;font-weight:bold">var</span> b <span style="color:#000;font-weight:bold">=</span> t.toLowerCase();
    <span style="color:#000;font-weight:bold">if</span> (a <span style="color:#000;font-weight:bold">&lt;</span> b) <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>;
    <span style="color:#000;font-weight:bold">if</span> (a <span style="color:#000;font-weight:bold">&gt;</span> b) <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">1</span>;
    <span style="color:#000;font-weight:bold">return</span> <span style="color:#099">0</span>;
}); <span style="color:#998;font-style:italic">// =&gt; [&#39;ant&#39;,&#39;Bug&#39;,&#39;cat&#39;,&#39;Dog&#39;]
</span></code></pre></div>
<h4 id="concat">concat</h4>
<p><code>concat</code>方法连接调用它的数组元素和它的参数，并返回一个新数组。如果参数是一个数组，那么连接的是数组元素，而不是数组本身，但是<code>concat</code>只处理最外层数组：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>];
a.concat(<span style="color:#099">4</span>, <span style="color:#099">5</span>) <span style="color:#998;font-style:italic">// Returns [1,2,3,4,5]
</span><span style="color:#998;font-style:italic"></span>a.concat([<span style="color:#099">4</span>,<span style="color:#099">5</span>]); <span style="color:#998;font-style:italic">// Returns [1,2,3,4,5]
</span><span style="color:#998;font-style:italic"></span>a.concat([<span style="color:#099">4</span>,<span style="color:#099">5</span>],[<span style="color:#099">6</span>,<span style="color:#099">7</span>]) <span style="color:#998;font-style:italic">// Returns [1,2,3,4,5,6,7]
</span><span style="color:#998;font-style:italic"></span>a.concat(<span style="color:#099">4</span>, [<span style="color:#099">5</span>,[<span style="color:#099">6</span>,<span style="color:#099">7</span>]]) <span style="color:#998;font-style:italic">// Returns [1,2,3,4,5,[6,7]]
</span></code></pre></div>
<h4 id="slice">slice</h4>
<p>语法如下：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0086b3">Array</span>.slice(start, end) <span style="color:#998;font-style:italic">// 返回包含[start, end)元素的数组
</span><span style="color:#998;font-style:italic"></span><span style="color:#0086b3">Array</span>.slice(start) <span style="color:#998;font-style:italic">// 等价于Array.slice(start, Array.length)
</span></code></pre></div>
<p>如果参数为负数，它表示是数组倒数第几个元素：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>,<span style="color:#099">4</span>,<span style="color:#099">5</span>];
a.slice(<span style="color:#099">0</span>,<span style="color:#099">3</span>); <span style="color:#998;font-style:italic">// Returns [1,2,3]
</span><span style="color:#998;font-style:italic"></span>
a.slice(<span style="color:#099">3</span>); <span style="color:#998;font-style:italic">// Returns [4,5]
</span><span style="color:#998;font-style:italic"></span>a.slice(<span style="color:#099">1</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>); <span style="color:#998;font-style:italic">// Returns [2,3,4]
</span><span style="color:#998;font-style:italic"></span>a.slice(<span style="color:#000;font-weight:bold">-</span><span style="color:#099">3</span>,<span style="color:#000;font-weight:bold">-</span><span style="color:#099">2</span>); <span style="color:#998;font-style:italic">// Returns [3]
</span></code></pre></div>
<h4 id="splice">splice</h4>
<p><code>splice</code>方法是用于插入或删除数组元素的通用方法，它会修改数组。<code>splice</code>第一个参数指定开始插入或删除的数组位置。第二个参数指定应该从数组中删除的元素个数。如果省略了第二个参数，那么从开始元素到数组末尾的所有数组元素都将被删除。<code>splice</code>返回删除元素的数组，如果没有删除元素，返回空数组：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>,<span style="color:#099">4</span>,<span style="color:#099">5</span>,<span style="color:#099">6</span>,<span style="color:#099">7</span>,<span style="color:#099">8</span>];
a.splice(<span style="color:#099">4</span>); <span style="color:#998;font-style:italic">// Returns [5,6,7,8]; a is [1,2,3,4]
</span><span style="color:#998;font-style:italic"></span>a.splice(<span style="color:#099">1</span>,<span style="color:#099">2</span>); <span style="color:#998;font-style:italic">// Returns [2,3]; a is [1,4]
</span><span style="color:#998;font-style:italic"></span>a.splice(<span style="color:#099">1</span>,<span style="color:#099">1</span>); <span style="color:#998;font-style:italic">// Returns [4]; a is [1]
</span></code></pre></div>
<p><code>splice</code>的前两个参数指定要删除的数组元素。它们后面可以跟任意数量的附加参数，这些参数指定要插入到数组中的元素，从第一个参数指定的位置开始：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>,<span style="color:#099">4</span>,<span style="color:#099">5</span>];
a.splice(<span style="color:#099">2</span>,<span style="color:#099">0</span>,<span style="color:#d14">&#39;a&#39;</span>,<span style="color:#d14">&#39;b&#39;</span>); <span style="color:#998;font-style:italic">// Returns []; a is [1,2,&#39;a&#39;,&#39;b&#39;,3,4,5]
</span><span style="color:#998;font-style:italic"></span>a.splice(<span style="color:#099">2</span>,<span style="color:#099">2</span>,[<span style="color:#099">1</span>,<span style="color:#099">2</span>],<span style="color:#099">3</span>); <span style="color:#998;font-style:italic">// Returns [&#39;a&#39;,&#39;b&#39;]; a is [1,2,[1,2],3,3,4,5]
</span></code></pre></div>
<h4 id="push和pop">push和pop</h4>
<p><code>push</code>和<code>pop</code>允许你以栈的方式处理数组。<code>push</code>将一个或多个新元素追加到数组的末尾，并返回数组的新长度。<code>pop</code>删除数组最后一个元素，递减数组长度，并返回删除的值。这两个方法直接修改数组。</p>
<h4 id="unshift和shift">unshift和shift</h4>
<p><code>unshift</code>在开头添加一个或多个元素，将现有的数组元素移动到更高的索引位置，并返回数组的新长度。<code>shift</code>删除并返回数组的第一个元素，将所有后续元素向下移动一个位置：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> []; <span style="color:#998;font-style:italic">// a:[]
</span><span style="color:#998;font-style:italic"></span>a.unshift(<span style="color:#099">1</span>); <span style="color:#998;font-style:italic">// a:[1] Returns: 1
</span><span style="color:#998;font-style:italic"></span>a.unshift(<span style="color:#099">22</span>); <span style="color:#998;font-style:italic">// a:[22,1] Returns: 2
</span><span style="color:#998;font-style:italic"></span>a.shift(); <span style="color:#998;font-style:italic">// a:[1] Returns: 22
</span><span style="color:#998;font-style:italic"></span>a.unshift(<span style="color:#099">3</span>,[<span style="color:#099">4</span>,<span style="color:#099">5</span>]); <span style="color:#998;font-style:italic">// a:[3,[4,5],1] Returns: 3
</span><span style="color:#998;font-style:italic"></span>a.shift(); <span style="color:#998;font-style:italic">// a:[[4,5],1] Returns: 3
</span><span style="color:#998;font-style:italic"></span>a.shift(); <span style="color:#998;font-style:italic">// a:[1] Returns: [4,5]
</span><span style="color:#998;font-style:italic"></span>a.shift(); <span style="color:#998;font-style:italic">// a:[] Returns: 1
</span></code></pre></div>
<p>多个参数调用<code>unshift</code>时，一次性插入所有的参数。</p>
<h4 id="tostring和tolocalestring">toString和toLocaleString</h4>
<p>数组的<code>toString</code>方法将每个元素转换为一个字符串，并用逗号连接这些字符串：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">[<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>].toString() <span style="color:#998;font-style:italic">// Yields &#39;1,2,3&#39;
</span><span style="color:#998;font-style:italic"></span>[<span style="color:#d14">&#34;a&#34;</span>, <span style="color:#d14">&#34;b&#34;</span>, <span style="color:#d14">&#34;c&#34;</span>].toString() <span style="color:#998;font-style:italic">// Yields &#39;a,b,c&#39;
</span><span style="color:#998;font-style:italic"></span>[<span style="color:#099">1</span>, [<span style="color:#099">2</span>,<span style="color:#d14">&#39;c&#39;</span>]].toString() <span style="color:#998;font-style:italic">// Yields &#39;1,2,c&#39;
</span></code></pre></div>
<p>数组的<code>join</code>方法不带参数时返回的字符串和<code>toString</code>方法相同。</p>
<p><code>toLocaleString</code>是<code>toString</code>的本地化版本。它通过调用元素的<code>toLocaleString</code>方法将每个元素转换为字符串，然后使用本地化的分隔符字符串连接结果字符串。</p>
<h3 id="es5数组方法">ES5数组方法</h3>
<p>首先，大多数方法接受一个函数作为它的第一个参数，并为每个数组元素调用一次这个方法。如果是稀疏数组，不会为不存在的元素调用函数。大多数情况下，使用3个参数调用你提供的函数：数组元素的值，数组元素的索引和数组本身。通常你只需要第一个参数的值。</p>
<p>大多数接受函数作为第一个参数的ES5数组方法有一个可选的第二个参数。如果指定，则函数被作为第二个参数的方法调用。ES5数组方法不会修改调用它的数组。</p>
<h4 id="foreach">forEach</h4>
<p>语法如下：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a.forEach(fn[, o])
</code></pre></div>
<p><code>forEach</code>遍历数组，并为每个元素调用指定的函数。<code>forEach</code>使用3个参数调用函数：数组元素的值、数组元素的索引和数组本身：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> data <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>,<span style="color:#099">4</span>,<span style="color:#099">5</span>]; <span style="color:#998;font-style:italic">// An array to sum
</span><span style="color:#998;font-style:italic">// Compute the sum of the array elements
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> sum <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; <span style="color:#998;font-style:italic">// Start at 0
</span><span style="color:#998;font-style:italic"></span>data.forEach(<span style="color:#000;font-weight:bold">function</span>(value) { sum <span style="color:#000;font-weight:bold">+=</span> value; }); <span style="color:#998;font-style:italic">// Add each value to sum
</span><span style="color:#998;font-style:italic"></span>sum <span style="color:#998;font-style:italic">// =&gt; 15
</span><span style="color:#998;font-style:italic">// Now increment each array element
</span><span style="color:#998;font-style:italic"></span>data.forEach(<span style="color:#000;font-weight:bold">function</span>(v, i, a) { a[i] <span style="color:#000;font-weight:bold">=</span> v <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>; });
data <span style="color:#998;font-style:italic">// =&gt; [2,3,4,5,6]
</span></code></pre></div>
<p><code>forEach</code>不能中止循环。如果需要提前终止，可以抛出异常：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">function</span> foreach(a,f,t) {
    <span style="color:#000;font-weight:bold">try</span> {
        a.forEach(f,t);
    }
    <span style="color:#000;font-weight:bold">catch</span>(e) {
        <span style="color:#000;font-weight:bold">if</span> (e <span style="color:#000;font-weight:bold">===</span> foreach.<span style="color:#000;font-weight:bold">break</span>) <span style="color:#000;font-weight:bold">return</span>;
        <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">throw</span> e;
    }
}

foreach.<span style="color:#000;font-weight:bold">break</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> <span style="color:#0086b3">Error</span>(<span style="color:#d14">&#34;StopIteration&#34;</span>);
</code></pre></div>
<h4 id="map">map</h4>
<p>语法如下：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a.map(fn)
</code></pre></div>
<p>map方法将数组的每个元素传递给指定的函数，并返回一个包含该函数返回值的新数组：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>, <span style="color:#099">2</span>, <span style="color:#099">3</span>];
b <span style="color:#000;font-weight:bold">=</span> a.map(<span style="color:#000;font-weight:bold">function</span>(x) { <span style="color:#000;font-weight:bold">return</span> x<span style="color:#000;font-weight:bold">*</span>x; }); <span style="color:#998;font-style:italic">// b is [1, 4, 9]
</span></code></pre></div>
<p>传递给<code>map</code>的方法应该返回一个值。如果数组是稀疏的，返回的数组也是稀疏的。</p>
<h4 id="filter">filter</h4>
<p>语法如下：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a.filter(fn)
</code></pre></div>
<p><code>filter</code>方法返回数组元素子集的数组。传递给<code>filter</code>的函数应该是谓词。如果谓词返回值为true，则该元素是返回数组的一个元素：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">5</span>, <span style="color:#099">4</span>, <span style="color:#099">3</span>, <span style="color:#099">2</span>, <span style="color:#099">1</span>];
smallvalues <span style="color:#000;font-weight:bold">=</span> a.filter(<span style="color:#000;font-weight:bold">function</span>(x) { <span style="color:#000;font-weight:bold">return</span> x <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">3</span> }); <span style="color:#998;font-style:italic">// [2, 1]
</span><span style="color:#998;font-style:italic"></span>everyother <span style="color:#000;font-weight:bold">=</span> a.filter(<span style="color:#000;font-weight:bold">function</span>(x,i) { <span style="color:#000;font-weight:bold">return</span> i<span style="color:#000;font-weight:bold">%</span><span style="color:#099">2</span><span style="color:#000;font-weight:bold">==</span><span style="color:#099">0</span> }); <span style="color:#998;font-style:italic">// [5, 3, 1]
</span></code></pre></div>
<p><code>filter</code>忽略稀疏数组中不存在的元素，它的返回值不是稀疏数组：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> dense <span style="color:#000;font-weight:bold">=</span> sparse.filter(<span style="color:#000;font-weight:bold">function</span>() { <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span>; });
a <span style="color:#000;font-weight:bold">=</span> a.filter(<span style="color:#000;font-weight:bold">function</span>(x) { <span style="color:#000;font-weight:bold">return</span> x <span style="color:#000;font-weight:bold">!==</span> <span style="color:#000;font-weight:bold">undefined</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> x <span style="color:#000;font-weight:bold">!=</span> <span style="color:#000;font-weight:bold">null</span>; });
</code></pre></div>
<h4 id="every和some">every和some</h4>
<p>语法如下：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a.every(fn)
a.some(fn)
</code></pre></div>
<p><code>every</code>方法类似数学符号<code>∀</code>： 当且仅当谓词函数对数组所有元素返回true时，它才返回true。</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>,<span style="color:#099">4</span>,<span style="color:#099">5</span>];
a.every(<span style="color:#000;font-weight:bold">function</span>(x) { <span style="color:#000;font-weight:bold">return</span> x <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">10</span>; }) <span style="color:#998;font-style:italic">// =&gt; true: all values &lt; 10.
</span><span style="color:#998;font-style:italic"></span>a.every(<span style="color:#000;font-weight:bold">function</span>(x) { <span style="color:#000;font-weight:bold">return</span> x <span style="color:#000;font-weight:bold">%</span> <span style="color:#099">2</span> <span style="color:#000;font-weight:bold">===</span> <span style="color:#099">0</span>; }) <span style="color:#998;font-style:italic">// =&gt; false: not all values even.
</span></code></pre></div>
<p><code>some</code>方法类似数学符号<code>∃</code>：如果存在一个元素使谓词函数返回true，则返回true。</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>,<span style="color:#099">4</span>,<span style="color:#099">5</span>];
a.some(<span style="color:#000;font-weight:bold">function</span>(x) { <span style="color:#000;font-weight:bold">return</span> x<span style="color:#000;font-weight:bold">%</span><span style="color:#099">2</span><span style="color:#000;font-weight:bold">===</span><span style="color:#099">0</span>; }) <span style="color:#998;font-style:italic">// =&gt; true a has some even numbers.
</span><span style="color:#998;font-style:italic"></span>a.some(<span style="color:#0086b3">isNaN</span>) <span style="color:#998;font-style:italic">// =&gt; false: a has no non-numbers.
</span></code></pre></div>
<p><code>every</code>和<code>some</code>都是一旦能确定返回值时就停止迭代。根据数学惯例，当在空数组上调用时，<code>every</code>返回true，<code>some</code>返回false。</p>
<h4 id="reduce和reduceright">reduce和reduceRight</h4>
<p>语法如下：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a.reduce(fn[, initial]) <span style="color:#998;font-style:italic">// initial为初始值
</span><span style="color:#998;font-style:italic"></span>a.reduceRight(fn[, initial])
</code></pre></div>
<p><code>reduce</code>和<code>reduceRight</code> 方法使用指定函数计算数组元素：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">3</span>,<span style="color:#099">4</span>,<span style="color:#099">5</span>]
<span style="color:#000;font-weight:bold">var</span> sum <span style="color:#000;font-weight:bold">=</span> a.reduce(<span style="color:#000;font-weight:bold">function</span>(x,y) { <span style="color:#000;font-weight:bold">return</span> x<span style="color:#000;font-weight:bold">+</span>y }, <span style="color:#099">0</span>); <span style="color:#998;font-style:italic">// Sum of values
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> product <span style="color:#000;font-weight:bold">=</span> a.reduce(<span style="color:#000;font-weight:bold">function</span>(x,y) { <span style="color:#000;font-weight:bold">return</span> x<span style="color:#000;font-weight:bold">*</span>y }, <span style="color:#099">1</span>); <span style="color:#998;font-style:italic">// Product of values
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> max <span style="color:#000;font-weight:bold">=</span> a.reduce(<span style="color:#000;font-weight:bold">function</span>(x,y) { <span style="color:#000;font-weight:bold">return</span> (x<span style="color:#000;font-weight:bold">&gt;</span>y)<span style="color:#000;font-weight:bold">?</span>x<span style="color:#000;font-weight:bold">:</span>y; }); <span style="color:#998;font-style:italic">// Largest value
</span></code></pre></div>
<p>在<code>reduce</code>和<code>reduceRight</code>方法中，传递给<code>fn</code>的第一个参数是已经累计的结果，数组元素的值、数组元素的索引和数组本身紧跟第一个参数。第一次调用<code>fn</code>时，第一个参数为初始值。后续调用的第一个参数是前一个调用的返回值。</p>
<p>当没有初始值调用<code>reduce</code>时，初始值为数组的第一个元素。没有初始值时在空数组上调用reduce会导致TypeError。</p>
<p>以下2中情况，<code>reduce</code>不会调用<code>fn</code>，而是直接返回那个值：</p>
<ul>
<li>只有一个元素数组，没有初始值</li>
<li>空数组和初始值</li>
</ul>
<p><code>reduceRight</code>的工作原理与<code>reduce</code>类似，只是它从高到低处理数组：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">2</span>, <span style="color:#099">3</span>, <span style="color:#099">4</span>]
<span style="color:#998;font-style:italic">// Compute 2^(3^4). Exponentiation has right-to-left precedence
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> big <span style="color:#000;font-weight:bold">=</span> a.reduceRight(<span style="color:#000;font-weight:bold">function</span>(accumulator,value) {
    <span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">Math</span>.pow(value,accumulator);
});
</code></pre></div>
<p><code>reduce</code>和<code>reduceRight</code>不支持方法调用。如果想要调用方法，可以使用<code>Function.bind</code>。</p>
<p><code>reduce</code>和<code>reduceRight</code>不仅仅用于数学计算，考虑上一章的<code>union</code>函数：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> objects <span style="color:#000;font-weight:bold">=</span> [{x<span style="color:#000;font-weight:bold">:</span><span style="color:#099">1</span>}, {y<span style="color:#000;font-weight:bold">:</span><span style="color:#099">2</span>}, {z<span style="color:#000;font-weight:bold">:</span><span style="color:#099">3</span>}];
<span style="color:#000;font-weight:bold">var</span> merged <span style="color:#000;font-weight:bold">=</span> objects.reduce(union); <span style="color:#998;font-style:italic">// =&gt; {x:1, y:2, z:3}
</span></code></pre></div>
<p>当两个对象具有相同名称的属性时，union函数从第一个参数使用该属性的值。因此<code>reduce</code>和<code>reduceRight</code>可能会返回不同的结果：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> objects <span style="color:#000;font-weight:bold">=</span> [{x<span style="color:#000;font-weight:bold">:</span><span style="color:#099">1</span>,a<span style="color:#000;font-weight:bold">:</span><span style="color:#099">1</span>}, {y<span style="color:#000;font-weight:bold">:</span><span style="color:#099">2</span>,a<span style="color:#000;font-weight:bold">:</span><span style="color:#099">2</span>}, {z<span style="color:#000;font-weight:bold">:</span><span style="color:#099">3</span>,a<span style="color:#000;font-weight:bold">:</span><span style="color:#099">3</span>}];
<span style="color:#000;font-weight:bold">var</span> leftunion <span style="color:#000;font-weight:bold">=</span> objects.reduce(union); <span style="color:#998;font-style:italic">// {x:1, y:2, z:3, a:1}
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">var</span> rightunion <span style="color:#000;font-weight:bold">=</span> objects.reduceRight(union); <span style="color:#998;font-style:italic">// {x:1, y:2, z:3, a:3}
</span></code></pre></div>
<h4 id="indexof和lastindexof">indexOf和lastIndexOf</h4>
<p>语法如下：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a.indexOf(value[, start]) <span style="color:#998;font-style:italic">// 从头到尾搜索数组
</span><span style="color:#998;font-style:italic"></span>a.lastIndexOf(value[, start]) <span style="color:#998;font-style:italic">// 与indexOf相反
</span></code></pre></div>
<p>返回找到的第一个元素的索引，如果没找到则返回-1：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">a <span style="color:#000;font-weight:bold">=</span> [<span style="color:#099">0</span>,<span style="color:#099">1</span>,<span style="color:#099">2</span>,<span style="color:#099">1</span>,<span style="color:#099">0</span>];
a.indexOf(<span style="color:#099">1</span>) <span style="color:#998;font-style:italic">// =&gt; 1: a[1] is 1
</span><span style="color:#998;font-style:italic"></span>a.lastIndexOf(<span style="color:#099">1</span>) <span style="color:#998;font-style:italic">// =&gt; 3: a[3] is 1
</span><span style="color:#998;font-style:italic"></span>a.indexOf(<span style="color:#099">3</span>) <span style="color:#998;font-style:italic">// =&gt; -1: no element has value 3
</span></code></pre></div>
<p>第二可选参数指定搜索的起始位置，它可以是负值，像<code>splice</code>方法一样当作与数组末尾的偏移量：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#998;font-style:italic">// Find all occurrences of a value x in an array a and return an array
</span><span style="color:#998;font-style:italic">// of matching indexes
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">function</span> findall(a, x) {
    <span style="color:#000;font-weight:bold">var</span> results <span style="color:#000;font-weight:bold">=</span> [], <span style="color:#998;font-style:italic">// The array of indexes we&#39;ll return
</span><span style="color:#998;font-style:italic"></span>        len <span style="color:#000;font-weight:bold">=</span> a.length, <span style="color:#998;font-style:italic">// The length of the array to be searched
</span><span style="color:#998;font-style:italic"></span>        pos <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; <span style="color:#998;font-style:italic">// The position to search from
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">while</span>(pos <span style="color:#000;font-weight:bold">&lt;</span> len) { <span style="color:#998;font-style:italic">// While more elements to search...
</span><span style="color:#998;font-style:italic"></span>        pos <span style="color:#000;font-weight:bold">=</span> a.indexOf(x, pos); <span style="color:#998;font-style:italic">// Search
</span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">if</span> (pos <span style="color:#000;font-weight:bold">===</span> <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>) <span style="color:#000;font-weight:bold">break</span>; <span style="color:#998;font-style:italic">// If nothing found, we&#39;re done.
</span><span style="color:#998;font-style:italic"></span>        results.push(pos); <span style="color:#998;font-style:italic">// Otherwise, store index in array
</span><span style="color:#998;font-style:italic"></span>        pos <span style="color:#000;font-weight:bold">=</span> pos <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>; <span style="color:#998;font-style:italic">// And start next search at next element
</span><span style="color:#998;font-style:italic"></span>    }
    <span style="color:#000;font-weight:bold">return</span> results; <span style="color:#998;font-style:italic">// Return array of indexes
</span><span style="color:#998;font-style:italic"></span>}
</code></pre></div>
<h4 id="数组类型">数组类型</h4>
<p>在ES5中，可以使用<code>Array.isArray</code>来判断一个对象是否是数组：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0086b3">Array</span>.isArray([]) <span style="color:#998;font-style:italic">// =&gt; true
</span><span style="color:#998;font-style:italic"></span><span style="color:#0086b3">Array</span>.isArray({}) <span style="color:#998;font-style:italic">// =&gt; false
</span></code></pre></div>
<p>在ES5之前，区分数组和非数组对象是非常困难的。除了函数，<code>typeof</code>一个对象返回<code>object</code>。<code>instanceof</code>在简单的情况下工作：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">[] <span style="color:#000;font-weight:bold">instanceof</span> <span style="color:#0086b3">Array</span> <span style="color:#998;font-style:italic">// =&gt; true
</span><span style="color:#998;font-style:italic"></span>({}) <span style="color:#000;font-weight:bold">instanceof</span> <span style="color:#0086b3">Array</span> <span style="color:#998;font-style:italic">// =&gt; false
</span></code></pre></div>
<p>解决方案是检查对象的<code>class</code>属性。对于数组，这个属性总是有值“Array”，因此我们可以这样在ES3中这样编写<code>isArray</code>函数：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> isArray <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">Function</span>.isArray <span style="color:#000;font-weight:bold">||</span> <span style="color:#000;font-weight:bold">function</span>(o) {
    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">typeof</span> o <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#34;object&#34;</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span>
        <span style="color:#0086b3">Object</span>.prototype.toString.call(o) <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#34;[object Array]&#34;</span>;
};
</code></pre></div>
<h3 id="类数组对象">类数组对象</h3>
<p>JavaScript数组有一些其他对象没有的特殊特性：</p>
<ul>
<li>当向数组添加新元素时，<code>length</code>属性将自动更新。</li>
<li>将<code>length</code>设置为较小的值会截断数组。</li>
<li>数组从<code>Array.prototype</code>继承了有用的方法。</li>
<li>数组具有类属性“Array“。</li>
</ul>
<p>事实证明，许多数组算法对类数组对象的工作效果与对数组的工作效果一样好。<code>arguments</code>对象是一个类数组对象，<code>document.getElementsByTagName</code>方法返回一个类数组对象。以下是一个测试像数组一样工作的对象：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#998;font-style:italic">// Determine if o is an array-like object.
</span><span style="color:#998;font-style:italic">// Strings and functions have numeric length properties, but are
</span><span style="color:#998;font-style:italic">// excluded by the typeof test. In client-side JavaScript, DOM text
</span><span style="color:#998;font-style:italic">// nodes have a numeric length property, and may need to be excluded
</span><span style="color:#998;font-style:italic">// with an additional o.nodeType != 3 test.
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">function</span> isArrayLike(o) {
    <span style="color:#000;font-weight:bold">if</span> (o <span style="color:#000;font-weight:bold">&amp;&amp;</span> <span style="color:#998;font-style:italic">// o is not null, undefined, etc.
</span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">typeof</span> o <span style="color:#000;font-weight:bold">===</span> <span style="color:#d14">&#34;object&#34;</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> <span style="color:#998;font-style:italic">// o is an object
</span><span style="color:#998;font-style:italic"></span>        <span style="color:#0086b3">isFinite</span>(o.length) <span style="color:#000;font-weight:bold">&amp;&amp;</span> <span style="color:#998;font-style:italic">// o.length is a finite number
</span><span style="color:#998;font-style:italic"></span>        o.length <span style="color:#000;font-weight:bold">&gt;=</span> <span style="color:#099">0</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> <span style="color:#998;font-style:italic">// o.length is non-negative
</span><span style="color:#998;font-style:italic"></span>        o.length<span style="color:#000;font-weight:bold">===</span><span style="color:#0086b3">Math</span>.floor(o.length) <span style="color:#000;font-weight:bold">&amp;&amp;</span> <span style="color:#998;font-style:italic">// o.length is an integer
</span><span style="color:#998;font-style:italic"></span>        o.length <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">4294967296</span>) <span style="color:#998;font-style:italic">// o.length &lt; 2^32
</span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span>; <span style="color:#998;font-style:italic">// Then o is array-like
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">else</span>
        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>; <span style="color:#998;font-style:italic">// Otherwise it is not
</span><span style="color:#998;font-style:italic"></span>}
</code></pre></div>
<p>JavaScript数组方法被特意定义为通用的，以便数组和类数组对象都能正确工作。在ES5中，所有数组方法都是通用的。在ES3中，除了<code>toString</code>和<code>toLocaleString</code>之外的所有方法都是通用的。因为类数组对象不继承<code>Array.prototype</code>，你不能直接调用数组方法。但你可以使用<code>Function.call</code>函数间接调用它们：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> {<span style="color:#d14">&#34;0&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#d14">&#34;a&#34;</span>, <span style="color:#d14">&#34;1&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#d14">&#34;b&#34;</span>, <span style="color:#d14">&#34;2&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#d14">&#34;c&#34;</span>, length<span style="color:#000;font-weight:bold">:</span><span style="color:#099">3</span>}; <span style="color:#998;font-style:italic">// An array-like object
</span><span style="color:#998;font-style:italic"></span><span style="color:#0086b3">Array</span>.prototype.join.call(a, <span style="color:#d14">&#34;+&#34;</span>) <span style="color:#998;font-style:italic">// =&gt; &#34;a+b+c&#34;
</span><span style="color:#998;font-style:italic"></span><span style="color:#0086b3">Array</span>.prototype.slice.call(a, <span style="color:#099">0</span>) <span style="color:#998;font-style:italic">// =&gt; [&#34;a&#34;,&#34;b&#34;,&#34;c&#34;]: true array copy
</span><span style="color:#998;font-style:italic"></span><span style="color:#0086b3">Array</span>.prototype.map.call(a, <span style="color:#000;font-weight:bold">function</span>(x) {
    <span style="color:#000;font-weight:bold">return</span> x.toUpperCase();
}) <span style="color:#998;font-style:italic">// =&gt; [&#34;A&#34;,&#34;B&#34;,&#34;C&#34;]:
</span></code></pre></div>
<p>Firefox很早就在数组构造函数上定义了函数，上面的例子可以这样重写：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> a <span style="color:#000;font-weight:bold">=</span> {<span style="color:#d14">&#34;0&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#d14">&#34;a&#34;</span>, <span style="color:#d14">&#34;1&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#d14">&#34;b&#34;</span>, <span style="color:#d14">&#34;2&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#d14">&#34;c&#34;</span>, length<span style="color:#000;font-weight:bold">:</span><span style="color:#099">3</span>}; <span style="color:#998;font-style:italic">// An array-like object
</span><span style="color:#998;font-style:italic"></span><span style="color:#0086b3">Array</span>.join(a, <span style="color:#d14">&#34;+&#34;</span>)
<span style="color:#0086b3">Array</span>.slice(a, <span style="color:#099">0</span>)
<span style="color:#0086b3">Array</span>.map(a, <span style="color:#000;font-weight:bold">function</span>(x) { <span style="color:#000;font-weight:bold">return</span> x.toUpperCase(); })
</code></pre></div>
<p>这些数组方法的静态函数版本在处理类数组对象时非常有用，但是由于它们是非标准的，所以不能指望在所有浏览器中都定义它们。在使用之前，你可以这样确保所需的函数存在：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0086b3">Array</span>.join <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">Array</span>.join <span style="color:#000;font-weight:bold">||</span> <span style="color:#000;font-weight:bold">function</span>(a,sep) {
    <span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">Array</span>.prototype.join.call(a,sep);
};
<span style="color:#0086b3">Array</span>.slice <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">Array</span>.slice <span style="color:#000;font-weight:bold">||</span> <span style="color:#000;font-weight:bold">function</span>(a,from,to) {
    <span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">Array</span>.prototype.slice.call(a,from,to);
};
<span style="color:#0086b3">Array</span>.map <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">Array</span>.map <span style="color:#000;font-weight:bold">||</span> <span style="color:#000;font-weight:bold">function</span>(a, f, thisArg) {
    <span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">Array</span>.prototype.map.call(a, f, thisArg);
}
</code></pre></div>
<h3 id="字符串作为类数组">字符串作为类数组</h3>
<p>在ES5（以及在ES5之前的许多浏览器实现）中，字符串表现得像只读数组。你可以使用<code>[]</code>，而不是<code>charAt</code>方法访问单个字符：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#000;font-weight:bold">var</span> s <span style="color:#000;font-weight:bold">=</span> test;
s.charAt(<span style="color:#099">0</span>) <span style="color:#998;font-style:italic">// =&gt; &#34;t&#34;
</span><span style="color:#998;font-style:italic"></span>s[<span style="color:#099">1</span>] <span style="color:#998;font-style:italic">// =&gt; &#34;e&#34;
</span></code></pre></div>
<p>字符串表现得像数组也意味着，我们可以对它们使用通用数组方法：</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">s <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;JavaScript&#34;</span>
<span style="color:#0086b3">Array</span>.prototype.join.call(s, <span style="color:#d14">&#34; &#34;</span>) <span style="color:#998;font-style:italic">// =&gt; &#34;J a v a S c r i p t&#34;
</span><span style="color:#998;font-style:italic"></span><span style="color:#0086b3">Array</span>.prototype.filter.call(s, <span style="color:#998;font-style:italic">// Filter the characters of the string
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">function</span>(x) {
        <span style="color:#000;font-weight:bold">return</span> x.match(<span style="color:#009926">/aeiou/</span>); <span style="color:#998;font-style:italic">// Only match nonvowels
</span><span style="color:#998;font-style:italic"></span>    }).join(<span style="color:#d14">&#34;&#34;</span>) <span style="color:#998;font-style:italic">// =&gt; &#34;JvScrpt&#34;
</span></code></pre></div>
<p>字符串是不可变的值，所以当它们被当作数组时，它们是只读数组。数组方法如<code>push</code>、<code>sort</code>、<code>reverse</code>和<code>splice</code>，会原地修改数组，不能在字符串上工作。尝试使用数组方法修改字符串不会导致错误，只是默默地失败。</p>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="http://gitop.cc">招财猫</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="http://gitop.cc/posts/arrays/">http://gitop.cc/posts/arrays/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/objects/">对象</a></li>
        
        <li><a href="/posts/statements/">语句</a></li>
        
        <li><a href="/posts/expressions_and_operators/">表达式和操作符</a></li>
        
        <li><a href="/posts/types_values_variables/">类型、值和变量</a></li>
        
        <li><a href="/posts/lexical_structure/">词法结构</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='http://gitop.cc/tags/Javascript'>Javascript</a></li>
                
            </ul>
            
        </div>
    </article>
    
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yourdiscussshortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "your github repo"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='http://gitop.cc/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="http://gitop.cc">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="http://gitop.cc/posts/scrapy-fundamental/" title="Scrapy爬虫基础">Scrapy爬虫基础</a>
    </li>
    
    <li>
        <a href="http://gitop.cc/posts/xpath/" title="XPath教程">XPath教程</a>
    </li>
    
    <li>
        <a href="http://gitop.cc/posts/refactoring-testing-debugging/" title="重构、测试和调试">重构、测试和调试</a>
    </li>
    
    <li>
        <a href="http://gitop.cc/posts/collection-api-enhancements/" title="Collection API增强">Collection API增强</a>
    </li>
    
    <li>
        <a href="http://gitop.cc/posts/parallel-data-processing-and-performance/" title="并行数据处理和性能">并行数据处理和性能</a>
    </li>
    
    <li>
        <a href="http://gitop.cc/posts/collecting-data-with-streams/" title="使用流收集数据">使用流收集数据</a>
    </li>
    
    <li>
        <a href="http://gitop.cc/posts/working-with-streams/" title="使用流">使用流</a>
    </li>
    
    <li>
        <a href="http://gitop.cc/posts/introducing-streams/" title="流介绍">流介绍</a>
    </li>
    
    <li>
        <a href="http://gitop.cc/posts/lambda-expressions/" title="Lambda表达式">Lambda表达式</a>
    </li>
    
    <li>
        <a href="http://gitop.cc/posts/git-multi-sshkey/" title="Git配置多个SSH-Key">Git配置多个SSH-Key</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li><a href="http://gitop.cc/categories/Crawler/">Crawler (1)</a></li>
    
    <li><a href="http://gitop.cc/categories/Database/">Database (12)</a></li>
    
    <li><a href="http://gitop.cc/categories/GUI/">GUI (5)</a></li>
    
    <li><a href="http://gitop.cc/categories/Gist/">Gist (1)</a></li>
    
    <li><a href="http://gitop.cc/categories/Language/">Language (23)</a></li>
    
    <li><a href="http://gitop.cc/categories/Linux/">Linux (3)</a></li>
    
    <li><a href="http://gitop.cc/categories/Network/">Network (4)</a></li>
    
    <li><a href="http://gitop.cc/categories/Tool/">Tool (4)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="http://gitop.cc/tags/C/">C</a>
    
    <a href="http://gitop.cc/tags/C&#43;&#43;/">C&#43;&#43;</a>
    
    <a href="http://gitop.cc/tags/CentOS/">CentOS</a>
    
    <a href="http://gitop.cc/tags/Docker/">Docker</a>
    
    <a href="http://gitop.cc/tags/Git/">Git</a>
    
    <a href="http://gitop.cc/tags/Greenplum/">Greenplum</a>
    
    <a href="http://gitop.cc/tags/Idea/">Idea</a>
    
    <a href="http://gitop.cc/tags/Java/">Java</a>
    
    <a href="http://gitop.cc/tags/Javascript/">Javascript</a>
    
    <a href="http://gitop.cc/tags/Markdown/">Markdown</a>
    
    <a href="http://gitop.cc/tags/MySQL/">MySQL</a>
    
    <a href="http://gitop.cc/tags/PostgreSQL/">PostgreSQL</a>
    
    <a href="http://gitop.cc/tags/ProjectEuler/">ProjectEuler</a>
    
    <a href="http://gitop.cc/tags/Python/">Python</a>
    
    <a href="http://gitop.cc/tags/Scrapy/">Scrapy</a>
    
    <a href="http://gitop.cc/tags/Ubuntu/">Ubuntu</a>
    
    <a href="http://gitop.cc/tags/XPath/">XPath</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="http://gitop.cc/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <div class="container">
        &copy; 2020 <a href="http://gitop.cc">招财猫的博客 By 招财猫</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank">Theme</a> based on <a href="https://github.com/flysnow-org/maupassant-hugo" target="_blank">maupassant</a>.
        
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




</body>

</html>