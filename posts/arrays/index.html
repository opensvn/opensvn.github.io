<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">

<meta itemprop="name" content="数组">
<meta itemprop="description" content="创建数组 创建数组的最简单方法是使用数组字面值： var empty = []; // An array with no elements var primes = [2, 3, 5, 7, 11]; // An array with 5 numeric elements var misc = [1.1, true, &#34;a&#34;,]; // 3 elements of various types &#43; trailing comma 数组字面值中的">


<meta itemprop="datePublished" content="2018-11-12T19:37:34&#43;08:00" />
<meta itemprop="dateModified" content="2018-11-12T19:37:34&#43;08:00" />
<meta itemprop="wordCount" content="6247">



<meta itemprop="keywords" content="Javascript," />
<meta property="og:title" content="数组" />
<meta property="og:description" content="创建数组 创建数组的最简单方法是使用数组字面值： var empty = []; // An array with no elements var primes = [2, 3, 5, 7, 11]; // An array with 5 numeric elements var misc = [1.1, true, &#34;a&#34;,]; // 3 elements of various types &#43; trailing comma 数组字面值中的" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://gitop.cc/posts/arrays/" />
<meta property="article:published_time" content="2018-11-12T19:37:34&#43;08:00"/>
<meta property="article:modified_time" content="2018-11-12T19:37:34&#43;08:00"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="数组"/>
<meta name="twitter:description" content="创建数组 创建数组的最简单方法是使用数组字面值： var empty = []; // An array with no elements var primes = [2, 3, 5, 7, 11]; // An array with 5 numeric elements var misc = [1.1, true, &#34;a&#34;,]; // 3 elements of various types &#43; trailing comma 数组字面值中的"/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>数组</title>
	<link rel="stylesheet" href="http://gitop.cc/css/style.min.568c54a56780af2a70c45272522247710b69dbfc080b315211fb98381e3796f8.css" integrity="sha256-VoxUpWeArypwxFJyUiJHcQtp2/wICzFSEfuYOB43lvg=">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="http://gitop.cc">静心</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="http://gitop.cc/posts/">Posts</a>
				<a href="http://gitop.cc/about/">About</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<span class="hdr-social hide-in-mobile"><a href="https://github.com/opensvn" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="http://gitop.cc/posts/">Posts</a></li>
			<li><a href="http://gitop.cc/about/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Nov 12, 2018</span></div>
				<h1>数组</h1>
			</header>
			<div class="content">
				

<h3 id="创建数组">创建数组<a href="#创建数组" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>创建数组的最简单方法是使用数组字面值：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">empty</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// An array with no elements
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">primes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">];</span> <span class="c1">// An array with 5 numeric elements
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">misc</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.1</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="s2">&#34;a&#34;</span><span class="p">,];</span> <span class="c1">// 3 elements of various types + trailing comma
</span></code></pre></div>

<p>数组字面值中的元素可以是任意的表达式。如果数组中有省略的元素，其值为<code>undefined</code>：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,,</span><span class="mi">3</span><span class="p">];</span> <span class="c1">// An array with 3 elements, the middle one undefined.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">undefs</span> <span class="o">=</span> <span class="p">[,,];</span> <span class="c1">// An array with 2 elements, both undefined.
</span></code></pre></div>

<p>另一种方式是使用<code>Array</code>构造函数：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">();</span> <span class="c1">// equivalent to []
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// length 10, but has no values
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;testing, testing&#34;</span><span class="p">);</span> <span class="c1">// arguments become array&#39;s elements
</span></code></pre></div>

<h3 id="读写数组元素">读写数组元素<a href="#读写数组元素" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>使用<code>[]</code>运算符访问数组的元素。所有索引都是属性名，但只有0到2^32-1之间的整数属性名才是索引。所有数组都是对象，你可以在数组上创建任何名称的属性。如果你使用的是索引，那么数组会自动更新<code>length</code>属性。</p>

<p>负数或浮点数可以用于数组索引。它们被转换为一个字符串，并被用作属性名，它被视为常规对象属性，而不是数组索引。</p>

<p>数组索引只是一种特殊类型的属性名，这意味着数组没有“越界”的概念：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="kc">true</span><span class="p">,</span> <span class="kc">false</span><span class="p">];</span> <span class="c1">// This array has elements at indexes 0 and 1
</span><span class="c1"></span><span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="c1">// =&gt; undefined. No element at this index.
</span><span class="c1"></span><span class="nx">a</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1">// =&gt; undefined. No property with this name.
</span></code></pre></div>

<h3 id="稀疏数组">稀疏数组<a href="#稀疏数组" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>稀疏数组是没有连续索引的数组。稀疏数组的<code>length</code>属性的值大于元素的数量：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// No elements, but a.length is 5.
</span><span class="c1"></span><span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// Create an array with no elements and length = 0.
</span><span class="c1"></span><span class="nx">a</span><span class="p">[</span><span class="mi">1000</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Assignment adds one element but sets length to 1001.
</span></code></pre></div>

<p>创建数组时忽略的元素和稀疏数组中不存在的元素是有区别的：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a1</span> <span class="o">=</span> <span class="p">[,,,];</span> <span class="c1">// This array is [undefined, undefined, undefined]
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">a2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// This array has no values at all
</span><span class="c1"></span><span class="mi">0</span> <span class="k">in</span> <span class="nx">a1</span> <span class="c1">// =&gt; true: a1 has an element with index 0
</span><span class="c1"></span><span class="mi">0</span> <span class="k">in</span> <span class="nx">a2</span> <span class="c1">// =&gt; false: a2 has no element with index 0
</span></code></pre></div>

<h3 id="数组长度">数组长度<a href="#数组长度" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>数组的<code>length</code>属性使得数组不同于普通的JavaScript对象。对于密集的数组， <code>length</code>属性指定数组中元素的数量。</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">[].</span><span class="nx">length</span> <span class="c1">// =&gt; 0: the array has no elements
</span><span class="c1"></span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">].</span><span class="nx">length</span> <span class="c1">// =&gt; 3: highest index is 2, length is 3
</span></code></pre></div>

<p>稀疏数组的<code>length</code> 属性大于元素的数量。也就是说，数组的索引永远小于数组<code>length</code>属性。为了维持这个不变量，数组有2个特殊行为：</p>

<ol>
<li>如果给大于<code>length</code>的索引<code>i</code>的元素赋值，则<code>length</code>被设为<code>i+1</code>。</li>
<li>如果将<code>length</code>属性设置为小于其当前值的非负整数<code>n</code>，那么任何索引大于或等于<code>n</code>的元素都被删除。</li>
</ol>

<p>将<code>length</code>属性设置为大于其当前的值，这样做实际上只是在数组末尾创建一个稀疏区域。在ES5中，可以使用<code>Object.defineProperty</code>将数组的<code>length</code>属性设置为只读：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span> <span class="c1">// Start with a 3-element array.
</span><span class="c1"></span><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&#34;length&#34;</span><span class="p">,</span> <span class="p">{</span><span class="nx">writable</span><span class="o">:</span> <span class="kc">false</span><span class="p">});</span>  <span class="c1">// Make the length property readonly.
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// a is unchanged.
</span></code></pre></div>

<p>类似地，如果使数组元素不可配置，则不能删除它，即不能将<code>length</code>属性设置为小于不可配置元素的索引。</p>

<h3 id="添加和删除元素">添加和删除元素<a href="#添加和删除元素" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>最简单的添加元素方法是赋值给新索引：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">// Start with an empty array.
</span><span class="c1"></span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;zero&#34;</span><span class="p">;</span> <span class="c1">// And add elements to it.
</span><span class="c1"></span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;one&#34;</span><span class="p">;</span>
</code></pre></div>

<p>还可以使用<code>push</code>方法向数组末尾添加一个或多个值：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// Start with an empty array
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&#34;zero&#34;</span><span class="p">)</span> <span class="c1">// Add a value at the end. a = [&#34;zero&#34;]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&#34;one&#34;</span><span class="p">,</span> <span class="s2">&#34;two&#34;</span><span class="p">)</span> <span class="c1">// Add two more values. a = [&#34;zero&#34;, &#34;one&#34;, &#34;two&#34;]
</span></code></pre></div>

<p>可以使用<code>unshift</code>在数组开头插入元素，将现有的元素移到更高的索引。</p>

<p>使用<code>delete</code>删除数组元素：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
<span class="k">delete</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="c1">// a now has no element at index 1
</span><span class="c1"></span><span class="mi">1</span> <span class="k">in</span> <span class="nx">a</span> <span class="c1">// =&gt; false: no array index 1 is defined
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="c1">// =&gt; 3: delete does not affect array length
</span></code></pre></div>

<p><code>delete</code>数组元素不会改变<code>length</code>属性，也不会将索引较高的元素向下移动，成为稀疏数组。也通过将<code>length</code>属性设置为新的长度来删除数组末尾的元素。</p>

<p><code>pop</code>方法将数组的<code>length</code>减1，并返回删除元素的值。</p>

<p><code>shift</code>方法从数组的开头删除一个元素，并将所有的元素索引前移一个位置。</p>

<p><code>splice</code>是用于插入、删除或替换数组元素的通用方法。它改变<code>length</code>属性，并根据需要将数组元素移到更高或更低的索引。</p>

<h3 id="遍历数组">遍历数组<a href="#遍历数组" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>遍历数组元素最常见的方法是使用for循环：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span> <span class="c1">// Get an array of property names for object o
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">// Store matching property values in this array
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// For each index in the array
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="c1">// Get the key at that index
</span><span class="c1"></span>    <span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">o</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span> <span class="c1">// Store the value in the values array
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>

<p>for循环一个小小的优化，不用每次查询<code>length</code>：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// loop body remains the same
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>

<p>循环中检查数组元素的几种情况：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="k">continue</span><span class="p">;</span> <span class="c1">// Skip null, undefined, and nonexistent elements
</span><span class="c1"></span><span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span> <span class="c1">// Skip undefined + nonexistent elements
</span><span class="c1"></span><span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">i</span> <span class="k">in</span> <span class="nx">a</span><span class="p">))</span> <span class="k">continue</span> <span class="p">;</span> <span class="c1">// Skip nonexistent elements
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>

<p>for/in循环可以用于稀疏阵列。每次循环给循环变量分配一个可枚举的属性名（包括数组索引），不存在的索引将不会被遍历：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">sparseArray</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">sparseArray</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
    <span class="c1">// Now do something with index and value
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>

<p>for/in循环可以返回继承属性的名字，比如添加到<code>Array.prototype</code>的属性。因此在数组上使用for/in循环，应该过滤掉不需要的属性：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span> <span class="c1">// Skip inherited properties
</span><span class="c1"></span><span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Skip i if it is not a non-negative integer
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nb">Number</span><span class="p">(</span><span class="nx">i</span><span class="p">))))</span> <span class="o">!==</span> <span class="nx">i</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>ES5定义了许多用于迭代数组元素的新方法，<code>forEach</code>方法是最通用的一个：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">];</span> <span class="c1">// This is the array we want to iterate
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">sumOfSquares</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// We want to compute the sum of the squares of data
</span><span class="c1"></span><span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Pass each element of data to this function
</span><span class="c1"></span>    <span class="nx">sumOfSquares</span> <span class="o">+=</span> <span class="nx">x</span><span class="o">*</span><span class="nx">x</span><span class="p">;</span> <span class="c1">// add up the squares
</span><span class="c1"></span><span class="p">});</span>
<span class="nx">sumOfSquares</span> <span class="c1">// =&gt;55 : 1+4+9+16+25
</span></code></pre></div>

<h3 id="多维数组">多维数组<a href="#多维数组" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>JavaScript不支持真正的多维数组，但可以用数组的数组模拟它们：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// Create a multidimensional array
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// 10 rows of the table
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">table</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="nx">table</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// Each row has 10 columns
</span><span class="c1">// Initialize the array
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">row</span> <span class="o">&lt;</span> <span class="nx">table</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">row</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="nx">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">col</span> <span class="o">&lt;</span> <span class="nx">table</span><span class="p">[</span><span class="nx">row</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">col</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">table</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]</span> <span class="o">=</span> <span class="nx">row</span><span class="o">*</span><span class="nx">col</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">product</span> <span class="o">=</span> <span class="nx">table</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">7</span><span class="p">];</span> <span class="c1">// 35
</span></code></pre></div>

<h3 id="数组方法">数组方法<a href="#数组方法" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>ES3在<code>Array.prototype</code>上定义了许多有用函数。这意味着它们可以用作任何数组的方法。</p>

<h4 id="join">join<a href="#join" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p><code>join</code>方法将数组元素转换为字符串，并连接起来，返回字符串。可以指定一个可选的字符串来分隔元素，默认使用逗号：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span> <span class="c1">// Create a new array with these three elements
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">join</span><span class="p">();</span> <span class="c1">// =&gt; &#34;1,2,3&#34;
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="p">);</span> <span class="c1">// =&gt; &#34;1 2 3&#34;
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">);</span> <span class="c1">// =&gt; &#34;123&#34;
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// An array of length 10 with no elements
</span><span class="c1"></span><span class="nx">b</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span> <span class="c1">// =&gt; &#39;---------&#39;: a string of 9 hyphens
</span></code></pre></div>

<p><code>join</code>方法和<code>split</code>方法刚好相反。</p>

<h4 id="reverse">reverse<a href="#reverse" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p><code>reverse</code>方法原地反转数组的顺序，并返回已反转的数组。</p>

<h4 id="sort">sort<a href="#sort" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p><code>sort</code>原地排序数组元素，并返回已排序的数组。在不带参数的情况下，<code>sort</code>按字母顺序对数组元素进行排序，如果需要的话，将数组元素临时转换为字符串来进行比较。如果数组包含<code>undefined</code>元素，它们被移到数组后面。</p>

<p>要将数组按其它顺序排序，必须传递一个比较函数作为<code>sort</code>的参数。这个函数决定它的两个参数中的哪个应该先出现在数组中：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">33</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1111</span><span class="p">,</span> <span class="mi">222</span><span class="p">];</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span> <span class="c1">// Alphabetical order: 1111, 222, 33, 4
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Numerical order: 4, 33, 222, 1111
</span><span class="c1"></span>    <span class="k">return</span> <span class="nx">a</span><span class="o">-</span><span class="nx">b</span><span class="p">;</span>
<span class="p">});</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nx">b</span><span class="o">-</span><span class="nx">a</span><span class="p">});</span> <span class="c1">// Reverse numerical order
</span><span class="c1"></span>
<span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ant&#39;</span><span class="p">,</span> <span class="s1">&#39;Bug&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;Dog&#39;</span><span class="p">]</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span> <span class="c1">// case-sensitive sort: [&#39;Bug&#39;,&#39;Dog&#39;,&#39;ant&#39;,cat&#39;]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Case-insensitive sort
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">});</span> <span class="c1">// =&gt; [&#39;ant&#39;,&#39;Bug&#39;,&#39;cat&#39;,&#39;Dog&#39;]
</span></code></pre></div>

<h4 id="concat">concat<a href="#concat" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p><code>concat</code>方法连接调用它的数组元素和它的参数，并返回一个新数组。如果参数是一个数组，那么连接的是数组元素，而不是数组本身，但是<code>concat</code>只处理最外层数组：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">// Returns [1,2,3,4,5]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]);</span> <span class="c1">// Returns [1,2,3,4,5]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span> <span class="c1">// Returns [1,2,3,4,5,6,7]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">]])</span> <span class="c1">// Returns [1,2,3,4,5,[6,7]]
</span></code></pre></div>

<h4 id="slice">slice<a href="#slice" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p>语法如下：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">)</span> <span class="c1">// 返回包含[start, end)元素的数组
</span><span class="c1"></span><span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">start</span><span class="p">)</span> <span class="c1">// 等价于Array.slice(start, Array.length)
</span></code></pre></div>

<p>如果参数为负数，它表示是数组倒数第几个元素：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">];</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// Returns [1,2,3]
</span><span class="c1"></span>
<span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// Returns [4,5]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// Returns [2,3,4]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// Returns [3]
</span></code></pre></div>

<h4 id="splice">splice<a href="#splice" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p><code>splice</code>方法是用于插入或删除数组元素的通用方法，它会修改数组。<code>splice</code>第一个参数指定开始插入或删除的数组位置。第二个参数指定应该从数组中删除的元素个数。如果省略了第二个参数，那么从开始元素到数组末尾的所有数组元素都将被删除。<code>splice</code>返回删除元素的数组，如果没有删除元素，返回空数组：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">];</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span> <span class="c1">// Returns [5,6,7,8]; a is [1,2,3,4]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// Returns [2,3]; a is [1,4]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// Returns [4]; a is [1]
</span></code></pre></div>

<p><code>splice</code>的前两个参数指定要删除的数组元素。它们后面可以跟任意数量的附加参数，这些参数指定要插入到数组中的元素，从第一个参数指定的位置开始：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">];</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">);</span> <span class="c1">// Returns []; a is [1,2,&#39;a&#39;,&#39;b&#39;,3,4,5]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// Returns [&#39;a&#39;,&#39;b&#39;]; a is [1,2,[1,2],3,3,4,5]
</span></code></pre></div>

<h4 id="push和pop">push和pop<a href="#push和pop" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p><code>push</code>和<code>pop</code>允许你以栈的方式处理数组。<code>push</code>将一个或多个新元素追加到数组的末尾，并返回数组的新长度。<code>pop</code>删除数组最后一个元素，递减数组长度，并返回删除的值。这两个方法直接修改数组。</p>

<h4 id="unshift和shift">unshift和shift<a href="#unshift和shift" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p><code>unshift</code>在开头添加一个或多个元素，将现有的数组元素移动到更高的索引位置，并返回数组的新长度。<code>shift</code>删除并返回数组的第一个元素，将所有后续元素向下移动一个位置：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// a:[]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// a:[1] Returns: 1
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="mi">22</span><span class="p">);</span> <span class="c1">// a:[22,1] Returns: 2
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span> <span class="c1">// a:[1] Returns: 22
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="mi">3</span><span class="p">,[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]);</span> <span class="c1">// a:[3,[4,5],1] Returns: 3
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span> <span class="c1">// a:[[4,5],1] Returns: 3
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span> <span class="c1">// a:[1] Returns: [4,5]
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span> <span class="c1">// a:[] Returns: 1
</span></code></pre></div>

<p>多个参数调用<code>unshift</code>时，一次性插入所有的参数。</p>

<h4 id="tostring和tolocalestring">toString和toLocaleString<a href="#tostring和tolocalestring" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p>数组的<code>toString</code>方法将每个元素转换为一个字符串，并用逗号连接这些字符串：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// Yields &#39;1,2,3&#39;
</span><span class="c1"></span><span class="p">[</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;b&#34;</span><span class="p">,</span> <span class="s2">&#34;c&#34;</span><span class="p">].</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// Yields &#39;a,b,c&#39;
</span><span class="c1"></span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]].</span><span class="nx">toString</span><span class="p">()</span> <span class="c1">// Yields &#39;1,2,c&#39;
</span></code></pre></div>

<p>数组的<code>join</code>方法不带参数时返回的字符串和<code>toString</code>方法相同。</p>

<p><code>toLocaleString</code>是<code>toString</code>的本地化版本。它通过调用元素的<code>toLocaleString</code>方法将每个元素转换为字符串，然后使用本地化的分隔符字符串连接结果字符串。</p>

<h3 id="es5数组方法">ES5数组方法<a href="#es5数组方法" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>首先，大多数方法接受一个函数作为它的第一个参数，并为每个数组元素调用一次这个方法。如果是稀疏数组，不会为不存在的元素调用函数。大多数情况下，使用3个参数调用你提供的函数：数组元素的值，数组元素的索引和数组本身。通常你只需要第一个参数的值。</p>

<p>大多数接受函数作为第一个参数的ES5数组方法有一个可选的第二个参数。如果指定，则函数被作为第二个参数的方法调用。ES5数组方法不会修改调用它的数组。</p>

<h4 id="foreach">forEach<a href="#foreach" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p>语法如下：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">fn</span><span class="p">[,</span> <span class="nx">o</span><span class="p">])</span>
</code></pre></div>

<p><code>forEach</code>遍历数组，并为每个元素调用指定的函数。<code>forEach</code>使用3个参数调用函数：数组元素的值、数组元素的索引和数组本身：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">];</span> <span class="c1">// An array to sum
</span><span class="c1">// Compute the sum of the array elements
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Start at 0
</span><span class="c1"></span><span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span> <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">value</span><span class="p">;</span> <span class="p">});</span> <span class="c1">// Add each value to sum
</span><span class="c1"></span><span class="nx">sum</span> <span class="c1">// =&gt; 15
</span><span class="c1">// Now increment each array element
</span><span class="c1"></span><span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span> <span class="p">{</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="p">});</span>
<span class="nx">data</span> <span class="c1">// =&gt; [2,3,4,5,6]
</span></code></pre></div>

<p><code>forEach</code>不能中止循环。如果需要提前终止，可以抛出异常：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">foreach</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span><span class="nx">t</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">e</span> <span class="o">===</span> <span class="nx">foreach</span><span class="p">.</span><span class="k">break</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">foreach</span><span class="p">.</span><span class="k">break</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&#34;StopIteration&#34;</span><span class="p">);</span>
</code></pre></div>

<h4 id="map">map<a href="#map" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p>语法如下：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span>
</code></pre></div>

<p>map方法将数组的每个元素传递给指定的函数，并返回一个包含该函数返回值的新数组：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
<span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="o">*</span><span class="nx">x</span><span class="p">;</span> <span class="p">});</span> <span class="c1">// b is [1, 4, 9]
</span></code></pre></div>

<p>传递给<code>map</code>的方法应该返回一个值。如果数组是稀疏的，返回的数组也是稀疏的。</p>

<h4 id="filter">filter<a href="#filter" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p>语法如下：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span>
</code></pre></div>

<p><code>filter</code>方法返回数组元素子集的数组。传递给<code>filter</code>的函数应该是谓词。如果谓词返回值为true，则该元素是返回数组的一个元素：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span>
<span class="nx">smallvalues</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="p">});</span> <span class="c1">// [2, 1]
</span><span class="c1"></span><span class="nx">everyother</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">i</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="p">});</span> <span class="c1">// [5, 3, 1]
</span></code></pre></div>

<p><code>filter</code>忽略稀疏数组中不存在的元素，它的返回值不是稀疏数组：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">dense</span> <span class="o">=</span> <span class="nx">sparse</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">});</span>
<span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="p">});</span>
</code></pre></div>

<h4 id="every和some">every和some<a href="#every和some" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p>语法如下：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span>
</code></pre></div>

<p><code>every</code>方法类似数学符号<code>∀</code>： 当且仅当谓词函数对数组所有元素返回true时，它才返回true。</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">];</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="p">})</span> <span class="c1">// =&gt; true: all values &lt; 10.
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span> <span class="p">})</span> <span class="c1">// =&gt; false: not all values even.
</span></code></pre></div>

<p><code>some</code>方法类似数学符号<code>∃</code>：如果存在一个元素使谓词函数返回true，则返回true。</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">];</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="o">%</span><span class="mi">2</span><span class="o">===</span><span class="mi">0</span><span class="p">;</span> <span class="p">})</span> <span class="c1">// =&gt; true a has some even numbers.
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="nb">isNaN</span><span class="p">)</span> <span class="c1">// =&gt; false: a has no non-numbers.
</span></code></pre></div>

<p><code>every</code>和<code>some</code>都是一旦能确定返回值时就停止迭代。根据数学惯例，当在空数组上调用时，<code>every</code>返回true，<code>some</code>返回false。</p>

<h4 id="reduce和reduceright">reduce和reduceRight<a href="#reduce和reduceright" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p>语法如下：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">fn</span><span class="p">[,</span> <span class="nx">initial</span><span class="p">])</span> <span class="c1">// initial为初始值
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">reduceRight</span><span class="p">(</span><span class="nx">fn</span><span class="p">[,</span> <span class="nx">initial</span><span class="p">])</span>
</code></pre></div>

<p><code>reduce</code>和<code>reduceRight</code> 方法使用指定函数计算数组元素：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="o">+</span><span class="nx">y</span> <span class="p">},</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Sum of values
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">product</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="o">*</span><span class="nx">y</span> <span class="p">},</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// Product of values
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="nx">x</span><span class="o">&gt;</span><span class="nx">y</span><span class="p">)</span><span class="o">?</span><span class="nx">x</span><span class="o">:</span><span class="nx">y</span><span class="p">;</span> <span class="p">});</span> <span class="c1">// Largest value
</span></code></pre></div>

<p>在<code>reduce</code>和<code>reduceRight</code>方法中，传递给<code>fn</code>的第一个参数是已经累计的结果，数组元素的值、数组元素的索引和数组本身紧跟第一个参数。第一次调用<code>fn</code>时，第一个参数为初始值。后续调用的第一个参数是前一个调用的返回值。</p>

<p>当没有初始值调用<code>reduce</code>时，初始值为数组的第一个元素。没有初始值时在空数组上调用reduce会导致TypeError。</p>

<p>以下2中情况，<code>reduce</code>不会调用<code>fn</code>，而是直接返回那个值：</p>

<ul>
<li>只有一个元素数组，没有初始值</li>
<li>空数组和初始值</li>
</ul>

<p><code>reduceRight</code>的工作原理与<code>reduce</code>类似，只是它从高到低处理数组：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="c1">// Compute 2^(3^4). Exponentiation has right-to-left precedence
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">big</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">reduceRight</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">accumulator</span><span class="p">,</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span><span class="nx">accumulator</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<p><code>reduce</code>和<code>reduceRight</code>不支持方法调用。如果想要调用方法，可以使用<code>Function.bind</code>。</p>

<p><code>reduce</code>和<code>reduceRight</code>不仅仅用于数学计算，考虑上一章的<code>union</code>函数：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">[{</span><span class="nx">x</span><span class="o">:</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nx">y</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="nx">z</span><span class="o">:</span><span class="mi">3</span><span class="p">}];</span>
<span class="kd">var</span> <span class="nx">merged</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">union</span><span class="p">);</span> <span class="c1">// =&gt; {x:1, y:2, z:3}
</span></code></pre></div>

<p>当两个对象具有相同名称的属性时，union函数从第一个参数使用该属性的值。因此<code>reduce</code>和<code>reduceRight</code>可能会返回不同的结果：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">[{</span><span class="nx">x</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="nx">y</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span><span class="nx">a</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="nx">z</span><span class="o">:</span><span class="mi">3</span><span class="p">,</span><span class="nx">a</span><span class="o">:</span><span class="mi">3</span><span class="p">}];</span>
<span class="kd">var</span> <span class="nx">leftunion</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">union</span><span class="p">);</span> <span class="c1">// {x:1, y:2, z:3, a:1}
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">rightunion</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">reduceRight</span><span class="p">(</span><span class="nx">union</span><span class="p">);</span> <span class="c1">// {x:1, y:2, z:3, a:3}
</span></code></pre></div>

<h4 id="indexof和lastindexof">indexOf和lastIndexOf<a href="#indexof和lastindexof" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p>语法如下：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">value</span><span class="p">[,</span> <span class="nx">start</span><span class="p">])</span> <span class="c1">// 从头到尾搜索数组
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="nx">value</span><span class="p">[,</span> <span class="nx">start</span><span class="p">])</span> <span class="c1">// 与indexOf相反
</span></code></pre></div>

<p>返回找到的第一个元素的索引，如果没找到则返回-1：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">];</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// =&gt; 1: a[1] is 1
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// =&gt; 3: a[3] is 1
</span><span class="c1"></span><span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// =&gt; -1: no element has value 3
</span></code></pre></div>

<p>第二可选参数指定搜索的起始位置，它可以是负值，像<code>splice</code>方法一样当作与数组末尾的偏移量：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// Find all occurrences of a value x in an array a and return an array
</span><span class="c1">// of matching indexes
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">findall</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">[],</span> <span class="c1">// The array of indexes we&#39;ll return
</span><span class="c1"></span>        <span class="nx">len</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="c1">// The length of the array to be searched
</span><span class="c1"></span>        <span class="nx">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// The position to search from
</span><span class="c1"></span>    <span class="k">while</span><span class="p">(</span><span class="nx">pos</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// While more elements to search...
</span><span class="c1"></span>        <span class="nx">pos</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">pos</span><span class="p">);</span> <span class="c1">// Search
</span><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nx">pos</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span> <span class="c1">// If nothing found, we&#39;re done.
</span><span class="c1"></span>        <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pos</span><span class="p">);</span> <span class="c1">// Otherwise, store index in array
</span><span class="c1"></span>        <span class="nx">pos</span> <span class="o">=</span> <span class="nx">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// And start next search at next element
</span><span class="c1"></span>    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span> <span class="c1">// Return array of indexes
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>

<h4 id="数组类型">数组类型<a href="#数组类型" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>

<p>在ES5中，可以使用<code>Array.isArray</code>来判断一个对象是否是数组：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">([])</span> <span class="c1">// =&gt; true
</span><span class="c1"></span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">({})</span> <span class="c1">// =&gt; false
</span></code></pre></div>

<p>在ES5之前，区分数组和非数组对象是非常困难的。除了函数，<code>typeof</code>一个对象返回<code>object</code>。<code>instanceof</code>在简单的情况下工作：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">[]</span> <span class="k">instanceof</span> <span class="nb">Array</span> <span class="c1">// =&gt; true
</span><span class="c1"></span><span class="p">({})</span> <span class="k">instanceof</span> <span class="nb">Array</span> <span class="c1">// =&gt; false
</span></code></pre></div>

<p>解决方案是检查对象的<code>class</code>属性。对于数组，这个属性总是有值“Array”，因此我们可以这样在ES3中这样编写<code>isArray</code>函数：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">isArray</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">isArray</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">o</span> <span class="o">===</span> <span class="s2">&#34;object&#34;</span> <span class="o">&amp;&amp;</span>
        <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&#34;[object Array]&#34;</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>

<h3 id="类数组对象">类数组对象<a href="#类数组对象" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>JavaScript数组有一些其他对象没有的特殊特性：</p>

<ul>
<li>当向数组添加新元素时，<code>length</code>属性将自动更新。</li>
<li>将<code>length</code>设置为较小的值会截断数组。</li>
<li>数组从<code>Array.prototype</code>继承了有用的方法。</li>
<li>数组具有类属性“Array“。</li>
</ul>

<p>事实证明，许多数组算法对类数组对象的工作效果与对数组的工作效果一样好。<code>arguments</code>对象是一个类数组对象，<code>document.getElementsByTagName</code>方法返回一个类数组对象。以下是一个测试像数组一样工作的对象：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// Determine if o is an array-like object.
</span><span class="c1">// Strings and functions have numeric length properties, but are
</span><span class="c1">// excluded by the typeof test. In client-side JavaScript, DOM text
</span><span class="c1">// nodes have a numeric length property, and may need to be excluded
</span><span class="c1">// with an additional o.nodeType != 3 test.
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">isArrayLike</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">o</span> <span class="o">&amp;&amp;</span> <span class="c1">// o is not null, undefined, etc.
</span><span class="c1"></span>        <span class="k">typeof</span> <span class="nx">o</span> <span class="o">===</span> <span class="s2">&#34;object&#34;</span> <span class="o">&amp;&amp;</span> <span class="c1">// o is an object
</span><span class="c1"></span>        <span class="nb">isFinite</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="c1">// o.length is a finite number
</span><span class="c1"></span>        <span class="nx">o</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="c1">// o.length is non-negative
</span><span class="c1"></span>        <span class="nx">o</span><span class="p">.</span><span class="nx">length</span><span class="o">===</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="c1">// o.length is an integer
</span><span class="c1"></span>        <span class="nx">o</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">4294967296</span><span class="p">)</span> <span class="c1">// o.length &lt; 2^32
</span><span class="c1"></span>        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// Then o is array-like
</span><span class="c1"></span>    <span class="k">else</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// Otherwise it is not
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>

<p>JavaScript数组方法被特意定义为通用的，以便数组和类数组对象都能正确工作。在ES5中，所有数组方法都是通用的。在ES3中，除了<code>toString</code>和<code>toLocaleString</code>之外的所有方法都是通用的。因为类数组对象不继承<code>Array.prototype</code>，你不能直接调用数组方法。但你可以使用<code>Function.call</code>函数间接调用它们：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;0&#34;</span><span class="o">:</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;1&#34;</span><span class="o">:</span><span class="s2">&#34;b&#34;</span><span class="p">,</span> <span class="s2">&#34;2&#34;</span><span class="o">:</span><span class="s2">&#34;c&#34;</span><span class="p">,</span> <span class="nx">length</span><span class="o">:</span><span class="mi">3</span><span class="p">};</span> <span class="c1">// An array-like object
</span><span class="c1"></span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">join</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&#34;+&#34;</span><span class="p">)</span> <span class="c1">// =&gt; &#34;a+b+c&#34;
</span><span class="c1"></span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">// =&gt; [&#34;a&#34;,&#34;b&#34;,&#34;c&#34;]: true array copy
</span><span class="c1"></span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
<span class="p">})</span> <span class="c1">// =&gt; [&#34;A&#34;,&#34;B&#34;,&#34;C&#34;]:
</span></code></pre></div>

<p>Firefox很早就在数组构造函数上定义了函数，上面的例子可以这样重写：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;0&#34;</span><span class="o">:</span><span class="s2">&#34;a&#34;</span><span class="p">,</span> <span class="s2">&#34;1&#34;</span><span class="o">:</span><span class="s2">&#34;b&#34;</span><span class="p">,</span> <span class="s2">&#34;2&#34;</span><span class="o">:</span><span class="s2">&#34;c&#34;</span><span class="p">,</span> <span class="nx">length</span><span class="o">:</span><span class="mi">3</span><span class="p">};</span> <span class="c1">// An array-like object
</span><span class="c1"></span><span class="nb">Array</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">&#34;+&#34;</span><span class="p">)</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span> <span class="p">})</span>
</code></pre></div>

<p>这些数组方法的静态函数版本在处理类数组对象时非常有用，但是由于它们是非标准的，所以不能指望在所有浏览器中都定义它们。在使用之前，你可以这样确保所需的函数存在：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">Array</span><span class="p">.</span><span class="nx">join</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">join</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">sep</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">join</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">sep</span><span class="p">);</span>
<span class="p">};</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">from</span><span class="p">,</span><span class="nx">to</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">from</span><span class="p">,</span><span class="nx">to</span><span class="p">);</span>
<span class="p">};</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">map</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">map</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">f</span><span class="p">,</span> <span class="nx">thisArg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">f</span><span class="p">,</span> <span class="nx">thisArg</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="字符串作为类数组">字符串作为类数组<a href="#字符串作为类数组" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>

<p>在ES5（以及在ES5之前的许多浏览器实现）中，字符串表现得像只读数组。你可以使用<code>[]</code>，而不是<code>charAt</code>方法访问单个字符：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">test</span><span class="p">;</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1">// =&gt; &#34;t&#34;
</span><span class="c1"></span><span class="nx">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1">// =&gt; &#34;e&#34;
</span></code></pre></div>

<p>字符串表现得像数组也意味着，我们可以对它们使用通用数组方法：</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">s</span> <span class="o">=</span> <span class="s2">&#34;JavaScript&#34;</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">join</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="s2">&#34; &#34;</span><span class="p">)</span> <span class="c1">// =&gt; &#34;J a v a S c r i p t&#34;
</span><span class="c1"></span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="c1">// Filter the characters of the string
</span><span class="c1"></span>    <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/aeiou/</span><span class="p">);</span> <span class="c1">// Only match nonvowels
</span><span class="c1"></span>    <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">)</span> <span class="c1">// =&gt; &#34;JvScrpt&#34;
</span></code></pre></div>

<p>字符串是不可变的值，所以当它们被当作数组时，它们是只读数组。数组方法如<code>push</code>、<code>sort</code>、<code>reverse</code>和<code>splice</code>，会原地修改数组，不能在字符串上工作。尝试使用数组方法修改字符串不会导致错误，只是默默地失败。</p>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="http://gitop.cc/tags/javascript">Javascript</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>6247 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2018-11-12 19:37 &#43;0800</p>
			</footer>
		</article>
		<div class="post-nav thin">
			<a class="next-post" href="http://gitop.cc/posts/docker_install_gpdb_dev_env/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>Docker安装gpdb测试数据库</span>
			</a>
			<a class="prev-post" href="http://gitop.cc/posts/objects/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>对象</span>
			</a>
		</div>
		<div id="comments" class="thin">
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2019 <a href="http://gitop.cc">gitop</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="http://gitop.cc/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>


	<script src="http://gitop.cc/js/main.min.35ccbf1cdceb91e4c64c06b5d009d6e2977fafe56beda7762febd4e67528d2ac.js" integrity="sha256-Ncy/HNzrkeTGTAa10AnW4pd/r+Vr7ad2L+vU5nUo0qw="></script>

</body>

</html>
