
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>Pygame第三章 Pygame介绍 | opensvn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="opensvn">
    

    
    <meta name="description" content="安装PygameUbuntu下安装Pygame:
sudo apt-get install python-pygame
装好后，查看Pygame版本:
&amp;gt;&amp;gt;&amp;gt; import pygame
&amp;gt;&amp;gt;&amp;gt; print pygame.ver
使用PygamePygame有很多模块。每一个设备都有一个对应的模块。Pygame模块一览：



模块名
功能




pygame">
<meta property="og:type" content="article">
<meta property="og:title" content="Pygame第三章 Pygame介绍">
<meta property="og:url" content="https://opensvn.github.io/2015/11/02/pygame-3/index.html">
<meta property="og:site_name" content="opensvn">
<meta property="og:description" content="安装PygameUbuntu下安装Pygame:
sudo apt-get install python-pygame
装好后，查看Pygame版本:
&amp;gt;&amp;gt;&amp;gt; import pygame
&amp;gt;&amp;gt;&amp;gt; print pygame.ver
使用PygamePygame有很多模块。每一个设备都有一个对应的模块。Pygame模块一览：



模块名
功能




pygame">
<meta property="og:updated_time" content="2015-11-19T02:30:42.293Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pygame第三章 Pygame介绍">
<meta name="twitter:description" content="安装PygameUbuntu下安装Pygame:
sudo apt-get install python-pygame
装好后，查看Pygame版本:
&amp;gt;&amp;gt;&amp;gt; import pygame
&amp;gt;&amp;gt;&amp;gt; print pygame.ver
使用PygamePygame有很多模块。每一个设备都有一个对应的模块。Pygame模块一览：



模块名
功能




pygame">

    
    <link rel="alternative" href="/atom.xml" title="opensvn" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/author.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/author.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/author.jpg" alt="opensvn" title="opensvn"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="opensvn">opensvn</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页 | Home</a></li>
					
						<li><a href="/archives">归档 | Archives</a></li>
					
						<li><a href="/about">关于 | About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:opensvn.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/11/02/pygame-3/" title="Pygame第三章 Pygame介绍" itemprop="url">Pygame第三章 Pygame介绍</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="opensvn" target="_blank" itemprop="author">opensvn</a>
		
  <p class="article-time">
    <time datetime="2015-11-02T00:16:02.000Z" itemprop="datePublished"> 发表于 2015-11-02</time>
    
  </p>
</header>
	<div class="article-content">
		
		<h1 id="安装Pygame">安装Pygame</h1><p>Ubuntu下安装Pygame:</p>
<pre><code>sudo apt-<span class="built_in">get</span> install <span class="keyword">python</span>-pygame
</code></pre><p>装好后，查看Pygame版本:</p>
<pre><code><span class="prompt">&gt;&gt;</span>&gt; import pygame
<span class="prompt">&gt;&gt;</span>&gt; print pygame.ver
</code></pre><h1 id="使用Pygame">使用Pygame</h1><p>Pygame有很多模块。每一个设备都有一个对应的模块。Pygame模块一览：</p>
<table>
<thead>
<tr>
<th>模块名</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>pygame.cdrom</td>
<td style="text-align:left">访问和控制光驱</td>
</tr>
<tr>
<td>pygame.cursors</td>
<td style="text-align:left">加载光标图片</td>
</tr>
<tr>
<td>pygame.display</td>
<td style="text-align:left">访问显示设备</td>
</tr>
<tr>
<td>pygame.draw</td>
<td style="text-align:left">绘制形状、线和点</td>
</tr>
<tr>
<td>pygame.event</td>
<td style="text-align:left">管理事件</td>
</tr>
<tr>
<td>pygame.font</td>
<td style="text-align:left">使用字体</td>
</tr>
<tr>
<td>pygame.image</td>
<td style="text-align:left">加载和存储图片</td>
</tr>
<tr>
<td>pygame.joystick</td>
<td style="text-align:left">使用游戏手柄或者类似设备</td>
</tr>
<tr>
<td>pygame.key</td>
<td style="text-align:left">读取键盘按键</td>
</tr>
<tr>
<td>pygame.mixer</td>
<td style="text-align:left">加载和播放声音</td>
</tr>
<tr>
<td>pygame.mouse</td>
<td style="text-align:left">管理鼠标</td>
</tr>
<tr>
<td>pygame.movie</td>
<td style="text-align:left">播放视频</td>
</tr>
<tr>
<td>pygame.music</td>
<td style="text-align:left">处理音乐和音频流</td>
</tr>
<tr>
<td>pygame.overlay</td>
<td style="text-align:left">访问高级视频叠加</td>
</tr>
<tr>
<td>pygame</td>
<td style="text-align:left">包含高层Pygame函数</td>
</tr>
<tr>
<td>pygame.rect</td>
<td style="text-align:left">管理矩形区域</td>
</tr>
<tr>
<td>pygame.sndarray</td>
<td style="text-align:left">操作声音数据</td>
</tr>
<tr>
<td>pygame.sprite</td>
<td style="text-align:left">操作移动图像</td>
</tr>
<tr>
<td>pygame.surface</td>
<td style="text-align:left">管理图像和屏幕</td>
</tr>
<tr>
<td>pygame.surfarray</td>
<td style="text-align:left">管理点阵图像数据</td>
</tr>
<tr>
<td>pygame.time</td>
<td style="text-align:left">管理时间和帧信息</td>
</tr>
<tr>
<td>pygame.transform</td>
<td style="text-align:left">缩放和移动图像</td>
</tr>
</tbody>
</table>
<p>有些模块可能在某些平台上不存在，比如游戏运行的硬件驱动没有安装，这种情况下，Pygame将设置这个模块为None，可以使用None来测试。下面这段代码检测<code>pygame.font</code>是否可用：</p>
<pre><code><span class="keyword">if</span> pygame<span class="class">.font</span> is None:
    print <span class="string">'The font module is not available!'</span>
    <span class="function"><span class="title">exit</span><span class="params">()</span></span>
</code></pre><h1 id="重温Hello_World">重温Hello World</h1><pre><code>background_image_filename = <span class="string">'sushiplate.jpg'</span>
mouse_image_filename = <span class="string">'fugu.png'</span>

<span class="keyword">import</span> pygame
from pygame.locals <span class="keyword">import</span> *
from sys <span class="keyword">import</span> exit

pygame.init()

screen = pygame.display.set_mode((<span class="number">640</span>, <span class="number">480</span>), <span class="number">0</span>, <span class="number">32</span>)
pygame.display.set_caption(<span class="string">'Hello, World!'</span>)

background = pygame.image.load(background_image_filename).convert()
mouse_cursor = pygame.image.load(mouse_image_filename).convert_alpha()

<span class="keyword">while</span> True:
    <span class="keyword">for</span> event in pygame.event.<span class="keyword">get</span>():
        <span class="keyword">if</span> event.type == QUIT:
            exit()

    screen.blit(background, (0, 0))

    x, y = pygame.mouse.get_pos()
    x -= mouse_cursor.get_width() / 2
    y -= mouse_cursor.get_height() / 2
    screen.blit(mouse_cursor, (x, y))

    pygame.display.update()
</code></pre><p>第一行导入pygame包，使我们可以访问它的所有子模块。第二行导入一些常用函数和常量，这个不是必须的，但是更方便。</p>
<p><strong>pygame.init()</strong>非常简单，实际上却做了非常多工作。它初始化每一个Pygame的子模块。可以单独初始化某一个模块，比如<strong>pygame.sound.init()</strong>。</p>
<p><strong>pygame.display.set_mode</strong>返回一个Surface对象，代表桌面窗口。第一个参数为元祖，代表分辨率(必须)。第二个是一个标志位，具体意思见下表，如果不用什么特性，就指定0。第三个为色深，如果未提供或设置为0，Pygame将使用当前桌面的值。</p>
<table>
<thead>
<tr>
<th>标志位</th>
<th style="text-align:left">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>FULLSCREEN</td>
<td style="text-align:left">创建一个全屏窗口</td>
</tr>
<tr>
<td>DOUBLEBUF</td>
<td style="text-align:left">创建一个“双缓冲”窗口，建议在HWSURFACE或者OPENGL时使用</td>
</tr>
<tr>
<td>HWSURFACE</td>
<td style="text-align:left">创建一个硬件加速的窗口，必须和FULLSCREEN同时使用</td>
</tr>
<tr>
<td>OPENGL</td>
<td style="text-align:left">创建一个OpenGL渲染的窗口</td>
</tr>
<tr>
<td>RESIZABLE</td>
<td style="text-align:left">创建一个可变大小的窗口</td>
</tr>
<tr>
<td>NOFRAME</td>
<td style="text-align:left">创建一个没有边框的窗口</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>色深</th>
<th style="text-align:left">颜色个数</th>
</tr>
</thead>
<tbody>
<tr>
<td>8 bits</td>
<td style="text-align:left">256种颜色</td>
</tr>
<tr>
<td>15 bits</td>
<td style="text-align:left">32768种颜色，空闲一位</td>
</tr>
<tr>
<td>16 bits</td>
<td style="text-align:left">65536种颜色</td>
</tr>
<tr>
<td>24 bits</td>
<td style="text-align:left">16.7百万种颜色</td>
</tr>
<tr>
<td>32 bits</td>
<td style="text-align:left">16.7百万种颜色，空闲8位</td>
</tr>
</tbody>
</table>
<p><strong>load</strong>函数读取一个文件并返回一个包含图片数据的Surface对象，直到画出来之前是不可见的。<br><strong>convert</strong>函数是将图像数据转化为Surface对象，每次加载完图像以后就应该做这件事件(事实上因为它太常用了，如果你不写Pygame也会帮你做)；<br><strong>convert_alpha</strong>相比<strong>convert</strong>，保留了Alpha通道信息(可以简单理解为透明的部分)，这样我们的光标才可以是不规则的形状。</p>
<p>游戏的主循环是一个无限循环，直到用户跳出。在这个主循环里做的事情就是不停地画背景和更新光标位置，虽然背景是不动的，我们还是需要每次都画它，否则鼠标覆盖过的位置就不能恢复正常了。<br>画完以后一定要<strong>update</strong>更新一下，否则画面一片漆黑。</p>
<pre><code><span class="function"><span class="title">init</span><span class="params">(...)</span></span>
    pygame.<span class="function"><span class="title">init</span><span class="params">()</span></span>: return (numpass, numfail)
    initialize all imported pygame modules

<span class="function"><span class="title">set_mode</span><span class="params">(...)</span></span>
    pygame<span class="class">.display</span><span class="class">.set_mode</span>(resolution=(<span class="number">0</span>,<span class="number">0</span>), flags=<span class="number">0</span>, depth=<span class="number">0</span>): return Surface
    initialize <span class="tag">a</span> window or screen <span class="keyword">for</span> <span class="attribute">display</span>

<span class="function"><span class="title">set_caption</span><span class="params">(...)</span></span>
    pygame<span class="class">.display</span><span class="class">.set_caption</span>(title, icontitle=None): return None
    set the current window <span class="tag">caption</span>

<span class="function"><span class="title">load</span><span class="params">(...)</span></span>
    pygame<span class="class">.image</span><span class="class">.load</span>(filename): return Surface
    pygame<span class="class">.image</span><span class="class">.load</span>(fileobj, namehint=): return Surface
    load new image from <span class="tag">a</span> file

<span class="function"><span class="title">convert</span><span class="params">(...)</span></span>
    Surface.<span class="function"><span class="title">convert</span><span class="params">(Surface)</span></span>: return Surface
    Surface.<span class="function"><span class="title">convert</span><span class="params">(depth, flags=<span class="number">0</span>)</span></span>: return Surface
    Surface.<span class="function"><span class="title">convert</span><span class="params">(masks, flags=<span class="number">0</span>)</span></span>: return Surface
    Surface.<span class="function"><span class="title">convert</span><span class="params">()</span></span>: return Surface
    change the pixel format of an image

<span class="function"><span class="title">convert_alpha</span><span class="params">(...)</span></span>
    Surface.<span class="function"><span class="title">convert_alpha</span><span class="params">(Surface)</span></span>: return Surface
    Surface.<span class="function"><span class="title">convert_alpha</span><span class="params">()</span></span>: return Surface
    change the pixel format of an image including per pixel alphas

<span class="function"><span class="title">get</span><span class="params">(...)</span></span>
    pygame<span class="class">.event</span><span class="class">.get</span>(): return Eventlist
    pygame<span class="class">.event</span><span class="class">.get</span>(type): return Eventlist
    pygame<span class="class">.event</span><span class="class">.get</span>(typelist): return Eventlist
    get events from the queue

<span class="function"><span class="title">blit</span><span class="params">(...)</span></span>
    Surface.<span class="function"><span class="title">blit</span><span class="params">(source, dest, area=None, special_flags = <span class="number">0</span>)</span></span>: return Rect
    draw one image onto another

<span class="function"><span class="title">get_pos</span><span class="params">(...)</span></span>
    pygame<span class="class">.mouse</span><span class="class">.get_pos</span>(): return (x, y)
    get the mouse <span class="attribute">cursor</span> <span class="attribute">position</span>

<span class="function"><span class="title">get_width</span><span class="params">(...)</span></span>
    Surface.<span class="function"><span class="title">get_width</span><span class="params">()</span></span>: return <span class="attribute">width</span>
    get the <span class="attribute">width</span> of the Surface

<span class="function"><span class="title">get_height</span><span class="params">(...)</span></span>
    Surface.<span class="function"><span class="title">get_height</span><span class="params">()</span></span>: return <span class="attribute">height</span>
    get the <span class="attribute">height</span> of the Surface

<span class="function"><span class="title">update</span><span class="params">(...)</span></span>
    pygame<span class="class">.display</span><span class="class">.update</span>(rectangle=None): return None
    pygame<span class="class">.display</span><span class="class">.update</span>(rectangle_list): return None
    update portions of the screen <span class="keyword">for</span> software displays
</code></pre><h1 id="理解事件">理解事件</h1><p>事件可以在任何时候产生，不管程序当前在做什么。因为你不能对发生的事件立刻做出反应，Pygame将事件存入一个队列，逐个处理。</p>
<h3 id="事件检索">事件检索</h3><p>上个程序中，使用<strong>pygame.event.get()</strong>来处理所有的事件，这就像打开大门让所有的人进入。如果我们使用<strong>pygame.event.wait()</strong>，Pygame就会等到一个事件发生才继续下去，就好像等在门口，直到有人来。这个函数不太常用，因为它会挂起程序直到有事情发生；而另外一个方法<strong>pygame.event.poll()</strong>就好一些，一旦调用，它会根据现在的情形返回一个真实的事件，否则返回一个类型为NOEVENT的假事件。</p>
<p>每隔一段固定的时间调用事件处理函数很有必要，这样Pygame才能在内部处理事件。如果不使用任何事件处理函数，也可以调用<strong>pygame.event.pump()</strong>替代事件循环。</p>
<p>事件对象包含一些描述事件发生的成员变量。所有事件对象都有一个事件类型。</p>
<table>
<thead>
<tr>
<th>事件</th>
<th style="text-align:left">产生途径</th>
<th style="text-align:left">参数</th>
</tr>
</thead>
<tbody>
<tr>
<td>QUIT</td>
<td style="text-align:left">用户点击关闭按钮</td>
<td style="text-align:left">none</td>
</tr>
<tr>
<td>ACTIVEEVENT</td>
<td style="text-align:left">Pygame被激活或隐藏</td>
<td style="text-align:left">gain,state</td>
</tr>
<tr>
<td>KEYDOWN</td>
<td style="text-align:left">键盘按下</td>
<td style="text-align:left">unicode,key,mod</td>
</tr>
<tr>
<td>KEYUP</td>
<td style="text-align:left">键盘松开</td>
<td style="text-align:left">key,mod</td>
</tr>
<tr>
<td>MOUSEMOTION</td>
<td style="text-align:left">鼠标移动</td>
<td style="text-align:left">pos,rel,buttons</td>
</tr>
<tr>
<td>MOUSEBUTTONDOWN</td>
<td style="text-align:left">鼠标按下</td>
<td style="text-align:left">pos,button</td>
</tr>
<tr>
<td>MOUSEBUTTONUP</td>
<td style="text-align:left">鼠标松开</td>
<td style="text-align:left">pos,button</td>
</tr>
<tr>
<td>JOYAXISMOTION</td>
<td style="text-align:left">游戏手柄(Joystick or pad)移动</td>
<td style="text-align:left">joy,axis,value</td>
</tr>
<tr>
<td>JOYBALLMOTION</td>
<td style="text-align:left">游戏球(Joy ball)移动</td>
<td style="text-align:left">joy,ball,rel</td>
</tr>
<tr>
<td>JOYHATMOTION</td>
<td style="text-align:left">游戏手柄(Joystick)移动</td>
<td style="text-align:left">joy,hat,value</td>
</tr>
<tr>
<td>JOYBUTTONDOWN</td>
<td style="text-align:left">游戏手柄按下</td>
<td style="text-align:left">joy,button</td>
</tr>
<tr>
<td>JOYBUTTONUP</td>
<td style="text-align:left">游戏手柄放开</td>
<td style="text-align:left">joy,button</td>
</tr>
<tr>
<td>VIDEORESIZE</td>
<td style="text-align:left">Pygame窗口缩放</td>
<td style="text-align:left">size,w,h</td>
</tr>
<tr>
<td>VIDEOEXPOSE</td>
<td style="text-align:left">部分或所有Pygame窗口暴露</td>
<td style="text-align:left">none</td>
</tr>
<tr>
<td>USEREVENT</td>
<td style="text-align:left">触发一个用户事件</td>
<td style="text-align:left">code</td>
</tr>
</tbody>
</table>
<pre><code>import pygame
<span class="keyword">from</span> pygame.locals import *
<span class="keyword">from</span> sys import <span class="keyword">exit</span>

pygame.init()
SCREEN_SIZE = (<span class="number">800</span>, <span class="number">600</span>)
screen = pygame.display.set_mode(SCREEN_SIZE, <span class="number">0</span>, <span class="number">32</span>)

font = pygame.font.SysFont(<span class="comment">'arial', 16)</span>
font_height = font.get_linesize()
event_text = []

<span class="keyword">while</span> <span class="literal">True</span>:
    <span class="keyword">event</span> = pygame.<span class="keyword">event</span>.wait()
    event_text.append(str(<span class="keyword">event</span>))
    event_text = event_text[-SCREEN_SIZE[<span class="number">1</span>]/font_height:]

    <span class="keyword">if</span> <span class="keyword">event</span>.type == QUIT:
        <span class="keyword">exit</span>()

    screen.fill((<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))

    y = SCREEN_SIZE[<span class="number">1</span>] - font_height
    <span class="keyword">for</span> <span class="keyword">text</span> <span class="keyword">in</span> reversed(event_text):
        screen.blit(font.render(<span class="keyword">text</span>, <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)), (<span class="number">0</span>, y))
        y -= font_height

    pygame.display.update()
</code></pre><p><strong>pygame.font.SysFont</strong>返回一个pygame.font.Font对象。</p>
<pre><code><span class="function"><span class="title">SysFont</span><span class="params">(name, size, bold=False, italic=False)</span></span>
    pygame<span class="class">.font</span><span class="class">.SysFont</span>(name, size, bold=False, italic=False) -&gt; Font
    create <span class="tag">a</span> pygame Font from system <span class="attribute">font</span> resources

    This will search the system fonts <span class="keyword">for</span> the given <span class="attribute">font</span>
    name. You can also enable bold or italic styles, and
    the appropriate system <span class="attribute">font</span> will be selected <span class="keyword">if</span> available.

    This will always return <span class="tag">a</span> valid Font <span class="tag">object</span>, and will
    fallback on the builtin pygame <span class="attribute">font</span> <span class="keyword">if</span> the given <span class="attribute">font</span>
    is not found.

    Name can also be <span class="tag">a</span> comma separated list of names, <span class="keyword">in</span>
    which case set of names will be searched <span class="keyword">in</span> <span class="attribute">order</span>. Pygame
    uses <span class="tag">a</span> small set of common <span class="attribute">font</span> aliases, <span class="keyword">if</span> the specific
    <span class="attribute">font</span> you ask <span class="keyword">for</span> is not available, <span class="tag">a</span> reasonable alternative
    may be used.

<span class="function"><span class="title">get_linesize</span><span class="params">(...)</span></span>
    Font.<span class="function"><span class="title">get_linesize</span><span class="params">()</span></span>: return int
    get the line space of the <span class="attribute">font</span> text

<span class="function"><span class="title">wait</span><span class="params">(...)</span></span>
    pygame<span class="class">.event</span><span class="class">.wait</span>(): return Event
    wait <span class="keyword">for</span> <span class="tag">a</span> single event from the queue

<span class="function"><span class="title">render</span><span class="params">(...)</span></span>
    Font.<span class="function"><span class="title">render</span><span class="params">(text, antialias, color, background=None)</span></span>: return Surface
    draw text on <span class="tag">a</span> new Surface

<span class="function"><span class="title">fill</span><span class="params">(...)</span></span>
    Surface.<span class="function"><span class="title">fill</span><span class="params">(color, rect=None, special_flags=<span class="number">0</span>)</span></span>: return Rect
    fill Surface with <span class="tag">a</span> solid <span class="attribute">color</span>

<span class="function"><span class="title">pump</span><span class="params">(...)</span></span>
    pygame<span class="class">.event</span><span class="class">.pump</span>(): return None
    internally process pygame event handlers
</code></pre><h3 id="处理鼠标移动事件">处理鼠标移动事件</h3><p>当鼠标移动时，<strong>MOUSEMOTION</strong>事件发生。包含下面三个值：</p>
<ul>
<li>buttons-一个对应鼠标按钮的元组。buttons[0]是鼠标左按钮，buttons[1]是鼠标中间按钮，buttons[2]是鼠标右按钮。如果按钮被按下，则值为1，反之为0。多个按钮可以同时按下。</li>
<li>pos-一个元组，包含事件发生时鼠标所在位置。</li>
<li>rel-一个元祖，包含现在距离上次产生鼠标事件时的距离。</li>
</ul>
<h3 id="处理鼠标按钮事件">处理鼠标按钮事件</h3><p>除了鼠标移动事件，鼠标还能产生<strong>MOUSEBUTTONDOWN</strong>和<strong>MOUSEBUTTONUP</strong>事件。包含下面2个值：</p>
<ul>
<li>button-被按下的按钮的数字。1为鼠标左按钮，2为鼠标中间按钮，3为鼠标右按钮。</li>
<li>pos-一个元组，包含事件发生时鼠标所在位置。</li>
</ul>
<h3 id="处理键盘事件">处理键盘事件</h3><p>键盘和游戏手柄的事件类似。当一个键被按下<strong>KEYDOWN</strong>事件发生。当一个键松开<strong>KEYUP</strong>事件发生。</p>
<pre><code>bg_file = <span class="comment">'sushiplate.jpg'</span>

import pygame
<span class="keyword">from</span> pygame.locals import *
<span class="keyword">from</span> sys import <span class="keyword">exit</span>

pygame.init()
screen = pygame.display.set_mode((<span class="number">640</span>, <span class="number">480</span>), FULLSCREEN, <span class="number">32</span>)
background = pygame.image.load(bg_file).convert()

x, y = <span class="number">0</span>, <span class="number">0</span>
move_x, move_y = <span class="number">0</span>, <span class="number">0</span>

<span class="keyword">while</span> <span class="literal">True</span>:
    <span class="keyword">for</span> <span class="keyword">event</span> <span class="keyword">in</span> pygame.<span class="keyword">event</span>.<span class="keyword">get</span>():
        <span class="keyword">if</span> <span class="keyword">event</span>.type == QUIT:
            <span class="keyword">exit</span>()
        <span class="keyword">if</span> <span class="keyword">event</span>.type == KEYDOWN:
            <span class="keyword">if</span> <span class="keyword">event</span>.<span class="keyword">key</span> == K_LEFT:
                move_x = -<span class="number">1</span>
            elif <span class="keyword">event</span>.<span class="keyword">key</span> == K_RIGHT:
                move_x = <span class="number">1</span>
            elif <span class="keyword">event</span>.<span class="keyword">key</span> == K_UP:
                move_y = -<span class="number">1</span>
            elif <span class="keyword">event</span>.<span class="keyword">key</span> == K_DOWN:
                move_y = <span class="number">1</span>
        elif <span class="keyword">event</span>.type == KEYUP:
            <span class="keyword">if</span> <span class="keyword">event</span>.<span class="keyword">key</span> == K_LEFT <span class="keyword">or</span> <span class="keyword">event</span>.<span class="keyword">key</span> == K_RIGHT:
                move_x = <span class="number">0</span>
            elif <span class="keyword">event</span>.<span class="keyword">key</span> == K_UP <span class="keyword">or</span> <span class="keyword">event</span>.<span class="keyword">key</span> == K_DOWN:
                move_y = <span class="number">0</span>
    x += move_x
    y += move_y

    screen.fill((<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))
    screen.blit(background, (x, y))

    pygame.display.update()
</code></pre><p><strong>KEYDOWN</strong>和<strong>KEYUP</strong>事件包含下面三个值：</p>
<ul>
<li>key-这是一个代表按下或松开的键值的数字。每一个键盘上的物理按钮都有一个以K_开头的常量。字母键为K_a到K_z，其它的如K_SPACE和K_RETURN。</li>
<li>mod-这个值代表和key组合使用的其它键，比如Shift，Alt和Ctrl。每一个组合键以KMOD_开头，比如KMOD_SHIFT，KMOD_ALT和KMOD_CTRL。如果mod &amp; KMOD_CTRL为真，则表示按下了Ctrl键。</li>
<li>unicode-这个是被按下的键的Unicode值。每一个符号都有一个Unicode值与它对应。</li>
</ul>
<h3 id="过滤事件">过滤事件</h3><p>一个游戏不是所有的事件都需要处理，而且通常存在其它方式获取某个事件可能提供的信息。比如，使用<strong>pygame.mouse.get_pos()</strong>就不需要响应<strong>MOUSEMOTION</strong>事件了。</p>
<p>使用<strong>pygame.event.set_blocked</strong>函数可以屏蔽事件，阻止事件进入事件队列。比如：</p>
<pre><code>pygame<span class="class">.event</span><span class="class">.set_blocked</span>(MOUSEMOTION)
pygame<span class="class">.event</span><span class="class">.set_blocked</span>([KEYDOWN, KEYUP])
pygame<span class="class">.event</span><span class="class">.set_blocked</span>(None)

<span class="function"><span class="title">set_blocked</span><span class="params">(...)</span></span>
    pygame<span class="class">.event</span><span class="class">.set_blocked</span>(type): return None
    pygame<span class="class">.event</span><span class="class">.set_blocked</span>(typelist): return None
    pygame<span class="class">.event</span><span class="class">.set_blocked</span>(None): return None
    control which events are allowed on the queue
</code></pre><p>与之相对的，<strong>pygame.event.set_allowed</strong>设定允许的事件。</p>
<pre><code><span class="function"><span class="title">set_allowed</span><span class="params">(...)</span></span>
    pygame<span class="class">.event</span><span class="class">.set_allowed</span>(type): return None
    pygame<span class="class">.event</span><span class="class">.set_allowed</span>(typelist): return None
    pygame<span class="class">.event</span><span class="class">.set_allowed</span>(None): return None
    control which events are allowed on the queue
</code></pre><p><strong>pygame.event.get_blocked</strong>可以查询一个事件是否被屏蔽。</p>
<pre><code><span class="function"><span class="title">get_blocked</span><span class="params">(...)</span></span>
    pygame<span class="class">.event</span><span class="class">.get_blocked</span>(type): return bool
    test <span class="keyword">if</span> <span class="tag">a</span> type of event is blocked from the queue
</code></pre><h3 id="产生事件">产生事件</h3><p>通常Pygame为你产生相应的事件，但是你也可以产生自己的事件。为了产生一个事件，必须首先使用<strong>pygame.event.Event</strong>创建一个事件对象，然后使用<strong>pygame.event.post</strong>发送到事件队列尾端。</p>
<pre><code>my_event = pygame.event.Event(KEYDOWN, key=K_SPACE, mod=<span class="number">0</span>, unicode=<span class="string">u' '</span>)
pgame.event.post(my_event)
</code></pre><p>事件构造函数接收事件类型和事件值参数。</p>
<pre><code><span class="function"><span class="title">Event</span><span class="params">(...)</span></span>
    pygame<span class="class">.event</span><span class="class">.Event</span>(type, dict): return Event
    pygame<span class="class">.event</span><span class="class">.Event</span>(type, **attributes): return Event
    create <span class="tag">a</span> new event <span class="tag">object</span>

<span class="function"><span class="title">post</span><span class="params">(...)</span></span>
    pygame<span class="class">.event</span><span class="class">.post</span>(Event): return None
    place <span class="tag">a</span> new event on the queue
</code></pre><p>除了模拟Pygame产生的事件，也可以创建新的事件。你只需使用一个大于<strong>USEREVENT</strong>的值作为事件的值。</p>
<pre><code>CATONKEYBOARD = USEREVENT + <span class="number">1</span>
my_event = pygame<span class="class">.event</span><span class="class">.Event</span>(CATONKEYBOARD, message=<span class="string">"Bad cat!"</span>)
pgame<span class="class">.event</span><span class="class">.post</span>(my_event)

<span class="keyword">for</span> event <span class="keyword">in</span> pygame<span class="class">.event</span><span class="class">.get</span>():
    <span class="keyword">if</span> event<span class="class">.type</span> == CATONKEYBOARD:
        print event.message
</code></pre><h1 id="打开一个显示">打开一个显示</h1><h3 id="全屏显示">全屏显示</h3><p><strong>pygame.display.set_mode</strong>第二个参数设置为<strong>FULLSCREEN</strong>，就能得到一个全屏窗口了。</p>
<pre><code>screen = pygame.display.set_mode((<span class="number">640</span>, <span class="number">480</span>), FULLSCREEN, <span class="number">32</span>)
</code></pre><blockquote>
<p><strong>注意</strong><br>如果在全屏模式下出问题，有时候非常难回到桌面。因此进入全屏模式前，需要先在窗口模式下测试。同时提供一个退出程序方法，因为全屏模式下关闭按钮看不到。</p>
</blockquote>
<p>当进入全屏时，你的显卡可能会切换到不同的显示模式，这将改变显示的宽度，高度和一次显示颜色的数量。显卡只支持几种大小和颜色数量的组合。如果显示的大小不支持，Pygame将选择下一个大小，并居中显示。<strong>pygame.display.list_modes</strong>可以查看显卡支持的分辨率。</p>
<pre><code>&gt;&gt;&gt; import pygame
&gt;&gt;&gt; pygame.<span class="function"><span class="title">init</span><span class="params">()</span></span>
&gt;&gt;&gt; pygame<span class="class">.display</span><span class="class">.list_modes</span>()

<span class="function"><span class="title">list_modes</span><span class="params">(...)</span></span>
    pygame<span class="class">.display</span><span class="class">.list_modes</span>(depth=<span class="number">0</span>, flags=pygame.FULLSCREEN): return list
    get list of available fullscreen modes
</code></pre><p>如果显卡不支持你想要的颜色数量，Pygame将自动转换以适应当前显示设备。</p>
<pre><code>background_image_filename = <span class="string">'sushiplate.jpg'</span>

import pygame
<span class="keyword">from</span> pygame.locals import *
<span class="keyword">from</span> sys import <span class="keyword">exit</span>

pygame.init()
screen = pygame.display.set_mode((<span class="number">640</span>, <span class="number">480</span>), <span class="number">0</span>, <span class="number">32</span>)
background = pygame.image.load(background_image_filename).convert()

Fullscreen = <span class="keyword">False</span>

<span class="keyword">while</span> <span class="keyword">True</span>:
    <span class="keyword">for</span> <span class="keyword">event</span> <span class="keyword">in</span> pygame.<span class="keyword">event</span>.get():
        <span class="keyword">if</span> <span class="keyword">event</span>.<span class="keyword">type</span> == QUIT:
            <span class="keyword">exit</span>()

    <span class="keyword">if</span> <span class="keyword">event</span>.<span class="keyword">type</span> == KEYDOWN:
        <span class="keyword">if</span> <span class="keyword">event</span>.key == K_f:
            Fullscreen = <span class="keyword">not</span> Fullscreen
            <span class="keyword">if</span> Fullscreen:
                screen = pygame.display.set_mode((<span class="number">640</span>, <span class="number">480</span>), FULLSCREEN, <span class="number">32</span>)
            <span class="keyword">else</span>:
                screen = pygame.display.set_mode((<span class="number">640</span>, <span class="number">480</span>), <span class="number">0</span>, <span class="number">32</span>)

    screen.blit(background, (<span class="number">0</span>, <span class="number">0</span>))
    pygame.display.update()
</code></pre><h3 id="可变尺寸的Pygame窗口">可变尺寸的Pygame窗口</h3><p>有时候用户想要能够改变窗口大小，调用<strong>pygame.display.set_mode</strong>时使用<strong>RESIZABLE</strong>标志位，可以达到这个目的。Pygame通过发送包含新宽高的<strong>VIDEORESIZE</strong>事件告诉用户窗口大小改变了。当收到这个事件时，我们应该再次调用<strong>pygame.display.set_mode</strong>。</p>
<pre><code>background_image_filename = <span class="string">'sushiplate.jpg'</span>

import pygame
<span class="keyword">from</span> pygame.locals import *
<span class="keyword">from</span> sys import <span class="keyword">exit</span>

SCREEN_SIZE = (<span class="number">640</span>, <span class="number">480</span>)

pygame.init()
screen = pygame.display.set_mode(SCREEN_SIZE, RESIZABLE, <span class="number">32</span>)

background = pygame.image.load(background_image_filename).convert()

<span class="keyword">while</span> <span class="keyword">True</span>:
    <span class="keyword">event</span> = pygame.<span class="keyword">event</span>.wait()
    <span class="keyword">if</span> <span class="keyword">event</span>.<span class="keyword">type</span> == QUIT:
        <span class="keyword">exit</span>()
    <span class="keyword">if</span> <span class="keyword">event</span>.<span class="keyword">type</span> == VIDEORESIZE:
        SCREEN_SIZE = <span class="keyword">event</span>.size
        screen = pygame.display.set_mode(SCREEN_SIZE, RESIZABLE, <span class="number">32</span>)
        pygame.display.set_caption(<span class="string">'Window resized to '</span> + str(<span class="keyword">event</span>.size))

    screen_width, screen_height = SCREEN_SIZE
    <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">0</span>, screen_height, background.get_height()):
        <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>, screen_width, background.get_width()):
            screen.blit(background, (x, y))

    pygame.display.update()
</code></pre><p><strong>VIDEORESIZE</strong>事件包含下面的值：</p>
<ul>
<li>size-一个元组，包含更改后窗口的尺寸。size[0]代表宽度，size[1]代表高度。</li>
<li>w-宽度，和size[0]一样，但是更方便</li>
<li>h-高度，和size[1]一样，但是更方便</li>
</ul>
<h3 id="无边框窗口">无边框窗口</h3><p>当调用<strong>set_mode</strong>时使用<strong>NOFRAME</strong>标志可以设置一个无边框窗口。</p>
<h3 id="其它显示标志">其它显示标志</h3><p>通常最好是使用0显示窗口而使用<strong>FULLSCREEN</strong>全屏以保证程序在所有平台都能运行。其它高级标志也许会有兼容问题。<br>如果设置了<strong>HWSURFACE</strong>标志，将创建一个硬件显示，存储在显存里面，只能和<strong>FULLSCREEN</strong>一起使用。</p>
<pre><code>screen = pygame.display.set_mode(SCREEN_SIZE, HWSURFACE <span class="string">| FULLSCREEN, 32)</span>
</code></pre><p>硬件显示比常规显示更快，因为它能够利用显卡的特性加速显示，缺点是兼容性不够好。硬件显示也能从<strong>DOUBLEBUF</strong>标志受益。这个有效地创建2个硬件显示，但是一次只能看见一个。</p>
<pre><code>screen = pygame.display.set_mode(SCREEN_SIZE, DOUBLEBUF |<span class="string"> HWSURFACE </span>|<span class="string"> FULLSCREEN, 32)</span>
</code></pre><p>通常当你调用<strong>pygame.display.update()</strong>时，整个屏幕从内存拷贝到显示设备，这会花费一些时间。而双缓冲允许你立刻切换到新的屏幕，使你的程序运行更快。</p>
<blockquote>
<p><strong>注意</strong><br>如果使用双缓冲显示，应该调用<strong>pygame.display.flip()</strong>而不是<strong>pygame.display.update()</strong>。这个做立即显示切换而不是拷贝屏幕数据。</p>
</blockquote>
<pre><code><span class="function"><span class="title">flip</span><span class="params">(...)</span></span>
    pygame<span class="class">.display</span><span class="class">.flip</span>(): return None
    update the full <span class="attribute">display</span> Surface to the screen
</code></pre><p>最后一个显示标志是<strong>OPENGL</strong>，它能够使用3D加速显示。</p>
<h1 id="使用字体模块">使用字体模块</h1><p>字体模块使用TrueType字体(TTFs)。必须先创建一个Font对象才能使用字体。最简单的方式就是使用<strong>pygame.font.SysFont</strong>，它会使用系统自带的一个字体。</p>
<pre><code>my_font = pygame<span class="class">.font</span><span class="class">.SysFont</span>(<span class="string">"arial"</span>, <span class="number">16</span>)
</code></pre><p>第一个参数是你想要创建字体的名字，第二个参数指定了字体的大小。Pygame会在系统字体里面查找，如果没找到则返回一个默认字体。<strong>pygame.font.get_fonts()</strong>可以获得当前系统所有可用字体。也可以使用<strong>pygame.font.Font</strong>直接从.ttf文件创建字体。</p>
<pre><code>my_font = pygame.font.Font(<span class="string">"my_font.ttf"</span>, <span class="number">16</span>)

class Font(__builtin__.object)
 |  pygame.font.Font(filename, size): <span class="constant">return</span> Font
 |  pygame.font.Font(object, size): <span class="constant">return</span> Font
 |  <span class="built_in">create</span> <span class="operator">a</span> <span class="built_in">new</span> Font object <span class="built_in">from</span> <span class="operator">a</span> <span class="built_in">file</span>

get_fonts()
    pygame.font.get_fonts() -&gt; list
    <span class="built_in">get</span> <span class="operator">a</span> list <span class="operator">of</span> <span class="keyword">system</span> font names

    Returns <span class="operator">the</span> list <span class="operator">of</span> all found <span class="keyword">system</span> fonts. Note that
    <span class="operator">the</span> names <span class="operator">of</span> <span class="operator">the</span> fonts will be all lowercase <span class="operator">with</span> spaces
    removed. This is how pygame internally stores <span class="operator">the</span> font
    names <span class="keyword">for</span> matching.
</code></pre><p>一旦创建了Font对象，就可以使用Font对象的<strong>render</strong>函数来渲染文字。它创建一个新的包含文字的Surface，可以输出到显示设备。</p>
<pre><code>text_surface = my_font.<span class="function"><span class="title">render</span><span class="params">(<span class="string">"Pygame is cool!"</span>, True, (<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span></span>, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))

<span class="function"><span class="title">render</span><span class="params">(...)</span></span>
    Font.<span class="function"><span class="title">render</span><span class="params">(text, antialias, color, background=None)</span></span>: return Surface
    draw text on <span class="tag">a</span> new Surface
</code></pre><p><strong>render</strong>的第一个参数是你想渲染的文字，它必须是一行。如果有多行，必须使用多个<strong>render</strong>调用。第二个参数是一个布尔值，用来开启抗锯齿。如果设置为True，则文字看起来会比较平滑。后面两个参数是文字的颜色和背景颜色。背景色是可选的，默认为透明的。</p>
<pre><code>import pygame
pygame.<span class="function"><span class="title">init</span><span class="params">()</span></span>

my_name = <span class="string">'Smith'</span>
my_font = pygame<span class="class">.font</span><span class="class">.SysFont</span>(<span class="string">'arial'</span>, <span class="number">64</span>)
name_surface = my_font.<span class="function"><span class="title">render</span><span class="params">(my_name, True, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span></span>, (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))
pygame<span class="class">.image</span><span class="class">.save</span>(name_surface, <span class="string">'name.png'</span>)
</code></pre><p>font模块详尽参考见<a href="http://www.pygame.org/docs/ref/font.html" target="_blank" rel="external">http://www.pygame.org/docs/ref/font.html</a></p>
<blockquote>
<p><strong>注意</strong><br>安装的字体因机各异，不能保证某个字体一定存在。解决方法是.ttf文件同游戏一起发布，但必须得到字体作者的许可。</p>
</blockquote>
<h1 id="当Pygame出错">当Pygame出错</h1><p>当<strong>pygame.image.load</strong>不能读取图片时，Pygame会抛出<strong>pygame.error</strong>异常。</p>
<pre><code>&gt;&gt;&gt; import pygame
&gt;&gt;&gt; screen = pygame.<span class="keyword">display</span>.set_mode((640, 0))
Traceback (most recent call last):
<span class="keyword">File</span> <span class="string">"&lt;interactive input&gt;"</span>, <span class="keyword">line</span> 1, <span class="keyword">in</span> ?
pygame.<span class="keyword">error</span>: Cannot <span class="keyword">set</span> 0 sized <span class="keyword">display</span> mode

<span class="keyword">class</span> <span class="keyword">error</span>(exceptions.RuntimeError)
 |  Method resolution <span class="keyword">order</span>:
 |      <span class="keyword">error</span>
 |      exceptions.RuntimeError
 |      exceptions.StandardError
 |      exceptions.Exception
 |      exceptions.BaseException
 |      __builtin__.object
</code></pre><p>一般而言，当你碰到<strong>pygame.error</strong>异常时，你也做不了什么事，因为这说明一个比较大的故障发生了。通常你能做的就是指导用户怎么做。在一个大的项目里面，检查错误很重要。</p>
<pre><code>try:
    screen = pygame<span class="class">.display</span><span class="class">.set_mode</span>(SCREEN_SIZE)
except pygame<span class="class">.error</span>, e:
    print <span class="string">"Can't create the display :-("</span>
    print e
    <span class="function"><span class="title">exit</span><span class="params">()</span></span>
</code></pre><h1 id="Pygame动起来">Pygame动起来</h1><pre><code>background_image_filename = <span class="comment">'sushiplate.jpg'</span>
SCREEN_SIZE = (<span class="number">640</span>, <span class="number">480</span>)
message = <span class="comment">'    This is a demonstration of the scrolly message script.    '</span>

import pygame
<span class="keyword">from</span> pygame.locals import *
<span class="keyword">from</span> sys import <span class="keyword">exit</span>

pygame.init()
screen = pygame.display.set_mode(SCREEN_SIZE)

font = pygame.font.SysFont(<span class="comment">'arial', 80)</span>
text_surface = font.render(message, <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>))

x = <span class="number">0</span>
y = (SCREEN_SIZE[<span class="number">1</span>] - text_surface.get_height()) / <span class="number">2</span>

background = pygame.image.load(background_image_filename).convert()

<span class="keyword">while</span> <span class="literal">True</span>:
    <span class="keyword">for</span> <span class="keyword">event</span> <span class="keyword">in</span> pygame.<span class="keyword">event</span>.<span class="keyword">get</span>():
        <span class="keyword">if</span> <span class="keyword">event</span>.type == QUIT:
            <span class="keyword">exit</span>()

    screen.blit(background, (<span class="number">0</span>, <span class="number">0</span>))

    x -= <span class="number">2</span>
    <span class="keyword">if</span> x &lt; -text_surface.get_width():
        x = <span class="number">0</span>

    screen.blit(text_surface, (x, y))
    screen.blit(text_surface, (x + text_surface.get_width(), y))

    pygame.display.update()
</code></pre>  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Pygame/">Pygame</a><a href="/tags/Python/">Python</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="https://opensvn.github.io/2015/11/02/pygame-3/" data-title="Pygame第三章 Pygame介绍 | opensvn" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/11/07/pygame-4/" title="Pygame第四章 创建视觉">
  <strong>上一篇：</strong><br/>
  <span>
  Pygame第四章 创建视觉</span>
</a>
</div>


<div class="next">
<a href="/2015/10/30/pyqt-8/"  title="PyQt编程第八章 数据处理和自定义文件类型">
 <strong>下一篇：</strong><br/> 
 <span>PyQt编程第八章 数据处理和自定义文件类型
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2015/11/02/pygame-3/" data-title="Pygame第三章 Pygame介绍" data-url="https://opensvn.github.io/2015/11/02/pygame-3/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Python/" title="Python">Python<sup>12</sup></a></li>
			
		
			
				<li><a href="/tags/PyQt/" title="PyQt">PyQt<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Pygame/" title="Pygame">Pygame<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C++">C++<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Markdown/" title="Markdown">Markdown<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Project-Euler/" title="Project Euler">Project Euler<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C">C<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello, I&#39;m opensvn. <br/>
			Try to do better.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/opensvn" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2015 
		
		<a href="/about" target="_blank" title="opensvn">opensvn</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"opensvn"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F86bb0f34aeafce8b9262f5000b269d72' type='text/javascript'%3E%3C/script%3E"));
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
